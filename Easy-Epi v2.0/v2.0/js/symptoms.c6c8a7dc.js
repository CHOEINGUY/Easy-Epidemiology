"use strict";(self["webpackChunkwebpage"]=self["webpackChunkwebpage"]||[]).push([[571],{320:function(t,e,o){o.r(e),o.d(e,{default:function(){return Ct}});var l=o(6768),a=o(144),r=o(2032),n=o(923),i=o(1215),s=o(4232);const c={class:"flex items-center gap-3 py-2"},u={class:"text-xl font-bold text-slate-800 tracking-tight"};var p=(0,l.pM)({__name:"SummaryBar",props:{title:{}},setup(t){return(t,e)=>((0,l.uX)(),(0,l.CE)("div",c,[e[0]||(e[0]=(0,l.Lk)("div",{class:"p-2 bg-blue-100 text-blue-600 rounded-lg shadow-sm"},[(0,l.Lk)("span",{class:"material-icons text-2xl"},"medical_services")],-1)),(0,l.Lk)("h2",u,(0,s.v_)(t.title),1)]))}});const d=p;var h=d,m=o(5130);const f={class:"flex flex-col w-full h-full"},b={class:"flex justify-between items-center px-5 py-4 border-b border-slate-100"},y={class:"flex items-center text-slate-800 font-semibold text-base"},v={class:"relative"},x={class:"font-medium"},g={key:0,class:"absolute top-full left-1/2 -translate-x-1/2 mt-2 flex items-center justify-center p-2 bg-white rounded-full shadow-lg border border-slate-100 z-50"},S={class:"overflow-auto flex-1 p-0"},w={class:"w-full text-sm text-center border-collapse table-fixed frequency-table"},C={class:"bg-slate-50 sticky top-0 z-10"},k={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},L={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},W={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},R=["title"],$={class:"py-3 px-4 text-slate-600"},z={class:"py-3 px-4 text-slate-600"};var E=(0,l.pM)({__name:"FrequencyTable",props:{data:{},isTableCopied:{type:Boolean}},emits:["copy"],setup(t){return(t,e)=>((0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",b,[(0,l.Lk)("span",y,[e[1]||(e[1]=(0,l.Lk)("span",{class:"w-1.5 h-1.5 rounded-full bg-blue-500 mr-2"},null,-1)),(0,l.eW)((0,s.v_)(t.$t("clinicalSymptoms.frequencyTable.title")),1)]),(0,l.Lk)("div",v,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$emit("copy")),class:"flex items-center gap-1.5 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-200 hover:bg-blue-50 transition-all shadow-sm"},[e[2]||(e[2]=(0,l.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,l.Lk)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,l.Lk)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)),(0,l.Lk)("span",x,(0,s.v_)(t.$t("clinicalSymptoms.frequencyTable.copy")),1)]),(0,l.bF)(m.eB,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 scale-50","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-50"},{default:(0,l.k6)(()=>[t.isTableCopied?((0,l.uX)(),(0,l.CE)("div",g,e[3]||(e[3]=[(0,l.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,l.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,l.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,l.Q3)("",!0)]),_:1})])]),(0,l.Lk)("div",S,[(0,l.Lk)("table",w,[e[4]||(e[4]=(0,l.Lk)("colgroup",null,[(0,l.Lk)("col",{style:{width:"40%"}}),(0,l.Lk)("col",{style:{width:"30%"}}),(0,l.Lk)("col",{style:{width:"30%"}})],-1)),(0,l.Lk)("thead",C,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",k,(0,s.v_)(t.$t("clinicalSymptoms.frequencyTable.symptom")),1),(0,l.Lk)("th",L,(0,s.v_)(t.$t("clinicalSymptoms.frequencyTable.count")),1),(0,l.Lk)("th",W,(0,s.v_)(t.$t("clinicalSymptoms.frequencyTable.percent")),1)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.data,(t,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e,class:"border-b border-slate-100 hover:bg-slate-50/50 transition-colors"},[(0,l.Lk)("td",{class:"py-3 px-4 text-slate-700 text-left truncate",title:t.name},(0,s.v_)(t.name),9,R),(0,l.Lk)("td",$,(0,s.v_)(t.count),1),(0,l.Lk)("td",z,(0,s.v_)(t.percent),1)]))),128))])])])]))}});const F=E;var T=F,P=o(5384);const _={class:"flex items-center gap-2"},V={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},O={class:"relative group"},B={key:0,class:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var K=(0,l.pM)({__name:"ControlCycleText",props:{label:{default:""},modelValue:{},options:{},displayLabels:{default:()=>[]},tooltipPrefix:{default:"Change to"},suffix:{default:""},minWidthClass:{default:"min-w-[60px]"}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,r=e,n=(0,a.KR)(!1),i=(0,a.KR)(""),c=(0,a.KR)(null),u=(0,l.EW)(()=>o.options.map((t,e)=>{if("object"===typeof t&&null!==t&&"value"in t)return t;const l=o.displayLabels[e]||`${t}${o.suffix}`;return{value:t,label:l,tooltip:""}})),p=(0,l.EW)(()=>{const t=u.value.findIndex(t=>t.value===o.modelValue);return-1===t?0:t}),d=(0,l.EW)(()=>c.value?c.value:u.value[p.value]?.label||""),h=()=>{const t=(p.value+1)%u.value.length,e=u.value[t];if(r("update:modelValue",e.value),n.value){const e=(t+1)%u.value.length,l=u.value[e];c.value=l.label,l.tooltip?i.value=l.tooltip:i.value=`${o.tooltipPrefix} ${l.label}`}else c.value=null},f=()=>{const t=(p.value+1)%u.value.length,e=u.value[t];c.value=e.label,e.tooltip?i.value=e.tooltip:i.value=`${o.tooltipPrefix} ${e.label}`,n.value=!0},b=()=>{n.value=!1,c.value=null};return(0,l.wB)(()=>o.modelValue,()=>{n.value||(c.value=null)}),(t,e)=>((0,l.uX)(),(0,l.CE)("div",_,[t.label?((0,l.uX)(),(0,l.CE)("span",V,(0,s.v_)(t.label),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",O,[(0,l.Lk)("button",{class:(0,s.C4)(["px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 shadow-sm hover:border-blue-400 hover:text-blue-600 transition-colors",t.minWidthClass]),onClick:h,onMouseenter:f,onMouseleave:b},(0,s.v_)(d.value),35),(0,l.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>[n.value?((0,l.uX)(),(0,l.CE)("div",B,[(0,l.eW)((0,s.v_)(i.value)+" ",1),e[0]||(e[0]=(0,l.Lk)("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})])]))}});const M=K;var D=M;const A={class:"flex items-center gap-2 ml-auto"},U={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},H={class:"relative group"},q={key:0,class:"absolute bottom-full mb-2 right-0 left-auto translate-x-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50 origin-bottom-right"};var I=(0,l.pM)({__name:"ControlCycleColor",props:{label:{default:""},modelValue:{},options:{},tooltip:{default:"Change color"}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,r=e,n=(0,a.KR)(!1),i=(0,a.KR)(""),c=()=>{const t=o.options.indexOf(o.modelValue),e=(t+1)%o.options.length;r("update:modelValue",o.options[e])},u=()=>{i.value=o.tooltip,n.value=!0},p=()=>{n.value=!1};return(t,e)=>((0,l.uX)(),(0,l.CE)("div",A,[t.label?((0,l.uX)(),(0,l.CE)("span",U,(0,s.v_)(t.label),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",H,[(0,l.Lk)("button",{class:"w-8 h-8 rounded-full border-2 border-white ring-1 ring-slate-200 hover:scale-110 transition-transform shadow-sm",style:(0,s.Tr)({backgroundColor:t.modelValue}),onClick:c,onMouseenter:u,onMouseleave:p},null,36),(0,l.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>[n.value?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.eW)((0,s.v_)(i.value)+" ",1),e[0]||(e[0]=(0,l.Lk)("div",{class:"absolute top-full right-3 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})])]))}});const N=I;var X=N;const j={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-50/80 rounded-xl border border-slate-200 shadow-sm backdrop-blur-sm w-full"};var Q=(0,l.pM)({__name:"ChartControlPanel",props:{barDirection:{default:"vertical"},chartFontSize:{default:16},chartWidth:{default:700},barWidthPercent:{default:50},selectedBarColor:{default:"#5470c6"},currentHighlight:{default:"none"},currentSort:{default:"none"},fontSizes:{default:()=>[]},fontSizeLabels:{default:()=>[]},chartWidths:{default:()=>[]},barWidthPercents:{default:()=>[]},barColors:{default:()=>[]},highlightOptions:{default:()=>[]},sortOptions:{default:()=>[]}},emits:["update:barDirection","update:chartFontSize","update:chartWidth","update:barWidthPercent","update:selectedBarColor","update:currentHighlight","update:currentSort"],setup(t){const{t:e}=(0,P.s9)(),o=t,a=(0,l.EW)(()=>o.highlightOptions.map(t=>({value:t.key,label:t.label,tooltip:t.tooltip}))),r=(0,l.EW)(()=>o.sortOptions.map(t=>({value:t.key,label:t.label,tooltip:t.tooltip})));return(t,e)=>((0,l.uX)(),(0,l.CE)("div",j,[(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.direction")+":",modelValue:t.barDirection,"onUpdate:modelValue":e[0]||(e[0]=e=>t.$emit("update:barDirection",e)),options:["vertical","horizontal"],displayLabels:[t.$t("clinicalSymptoms.controls.directionVertical"),t.$t("clinicalSymptoms.controls.directionHorizontal")],tooltipPrefix:t.$t("clinicalSymptoms.controls.directionTooltip"),suffix:t.$t("clinicalSymptoms.controls.directionSuffix")},null,8,["label","modelValue","displayLabels","tooltipPrefix","suffix"]),(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.fontSize")+":",modelValue:t.chartFontSize,"onUpdate:modelValue":e[1]||(e[1]=e=>t.$emit("update:chartFontSize",e)),options:t.fontSizes,displayLabels:t.fontSizeLabels,tooltipPrefix:t.$t("clinicalSymptoms.controls.fontSizePrefix"),suffix:t.$t("clinicalSymptoms.controls.fontSizeSuffix"),minWidthClass:"min-w-[60px]"},null,8,["label","modelValue","options","displayLabels","tooltipPrefix","suffix"]),(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.chartWidth")+":",modelValue:t.chartWidth,"onUpdate:modelValue":e[2]||(e[2]=e=>t.$emit("update:chartWidth",e)),options:t.chartWidths,tooltipPrefix:t.$t("clinicalSymptoms.controls.chartWidthPrefix"),suffix:t.$t("clinicalSymptoms.controls.chartWidthSuffix"),minWidthClass:"min-w-[70px]"},null,8,["label","modelValue","options","tooltipPrefix","suffix"]),(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.barWidth")+":",modelValue:t.barWidthPercent,"onUpdate:modelValue":e[3]||(e[3]=e=>t.$emit("update:barWidthPercent",e)),options:t.barWidthPercents,tooltipPrefix:t.$t("clinicalSymptoms.controls.barWidthPrefix"),suffix:t.$t("clinicalSymptoms.controls.barWidthSuffix"),minWidthClass:"min-w-[50px]"},null,8,["label","modelValue","options","tooltipPrefix","suffix"]),(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.highlight")+":",modelValue:t.currentHighlight,"onUpdate:modelValue":e[4]||(e[4]=e=>t.$emit("update:currentHighlight",e)),options:a.value,minWidthClass:"min-w-[100px]"},null,8,["label","modelValue","options"]),(0,l.bF)(D,{label:t.$t("clinicalSymptoms.controls.sort")+":",modelValue:t.currentSort,"onUpdate:modelValue":e[5]||(e[5]=e=>t.$emit("update:currentSort",e)),options:r.value,minWidthClass:"min-w-[90px]"},null,8,["label","modelValue","options"]),(0,l.bF)(X,{label:t.$t("clinicalSymptoms.controls.color")+":",modelValue:t.selectedBarColor,"onUpdate:modelValue":e[6]||(e[6]=e=>t.$emit("update:selectedBarColor",e)),options:t.barColors,tooltip:t.$t("clinicalSymptoms.controls.colorTooltip")},null,8,["label","modelValue","options","tooltip"])]))}});const G=Q;var Y=G;const J={class:"flex flex-col items-center justify-start p-5 bg-white rounded-2xl shadow-premium border border-slate-100 overflow-x-auto min-h-[700px]"},Z={class:"relative w-full flex justify-end gap-2 mb-2"},tt={class:"relative"},et={class:"font-medium"},ot={key:0,class:"absolute top-full left-1/2 -translate-x-1/2 mt-2 flex items-center justify-center p-2 bg-white rounded-full shadow-lg border border-slate-100 z-50"},lt={class:"font-medium"};var at=(0,l.pM)({__name:"SymptomBarChart",props:{chartWidth:{},isChartCopied:{type:Boolean}},emits:["copy","export"],setup(t,{expose:e}){const o=(0,a.KR)(null);return e({chartContainerRef:o}),(t,e)=>((0,l.uX)(),(0,l.CE)("div",J,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",tt,[(0,l.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$emit("copy")),class:"flex items-center gap-1.5 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-200 hover:bg-blue-50 transition-all shadow-sm"},[e[2]||(e[2]=(0,l.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,l.Lk)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,l.Lk)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)),(0,l.Lk)("span",et,(0,s.v_)(t.$t("clinicalSymptoms.chart.copy")),1)]),(0,l.bF)(m.eB,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 scale-50","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-50"},{default:(0,l.k6)(()=>[t.isChartCopied?((0,l.uX)(),(0,l.CE)("div",ot,e[3]||(e[3]=[(0,l.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,l.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,l.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,l.Q3)("",!0)]),_:1})]),(0,l.Lk)("button",{onClick:e[1]||(e[1]=e=>t.$emit("export")),class:"flex items-center gap-1.5 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-200 hover:bg-blue-50 transition-all shadow-sm"},[e[4]||(e[4]=(0,l.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,l.Lk)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,l.Lk)("polyline",{points:"7 10 12 15 17 10"}),(0,l.Lk)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),(0,l.Lk)("span",lt,(0,s.v_)(t.$t("clinicalSymptoms.chart.save")),1)])]),(0,l.Lk)("div",{ref_key:"chartContainerRef",ref:o,class:"w-full h-[600px] min-h-[600px] mx-auto",style:(0,s.Tr)({width:t.chartWidth+"px",minWidth:t.chartWidth+"px"})},null,4)]))}});const rt=at;var nt=rt,it=o(1335);function st(t={}){const e=(0,it.X)(),{currentSort:o}=t,a=(0,l.EW)(()=>e.headers||{clinical:[]}),r=(0,l.EW)(()=>e.rows||[]),n=(0,l.EW)(()=>{try{return Array.isArray(r.value)&&r.value.length>0}catch(t){return console.error("hasValidData ê³„ì‚° ì˜¤ë¥˜:",t),!1}}),i=(0,l.EW)(()=>{try{const t=a.value.clinical;return Array.isArray(t)&&t.length>0}catch(t){return console.error("hasValidClinicalHeaders ê³„ì‚° ì˜¤ë¥˜:",t),!1}}),s=(0,l.EW)(()=>{try{return n.value?r.value.filter(t=>t&&"1"===t.isPatient):[]}catch(t){return console.error("patientRows ê³„ì‚° ì˜¤ë¥˜:",t),[]}}),c=(0,l.EW)(()=>{try{return s.value.length}catch(t){return console.error("totalPatients ê³„ì‚° ì˜¤ë¥˜:",t),0}}),u=(0,l.EW)(()=>{try{return!!n.value&&r.value.some(t=>"1"===t.isPatient&&t.clinicalSymptoms)}catch(t){return console.error("hasValidPatientData ê³„ì‚° ì˜¤ë¥˜:",t),!1}}),p=(0,l.EW)(()=>{try{if(!i.value||!u.value)return console.warn("symptomStats: ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„° ìƒíƒœ"),[];const t=a.value.clinical||[],e=s.value,o=t.map((t,o)=>{try{let l=0;for(const t of e)t&&t.clinicalSymptoms&&Array.isArray(t.clinicalSymptoms)&&"1"===t.clinicalSymptoms[o]&&l++;const a=c.value,r=a>0?(l/a*100).toFixed(1):"0.0";return{name:t||`ì¦ìƒ${o+1}`,count:l,percent:parseFloat(r)}}catch(l){return console.error(`ì¦ìƒ ${t} ì²˜ë¦¬ ì˜¤ë¥˜:`,l),{name:t||`ì¦ìƒ${o+1}`,count:0,percent:0}}});return console.log("ì¦ìƒ í†µê³„ ê³„ì‚° ì™„ë£Œ:",o.length,"ê°œ ì¦ìƒ"),o}catch(t){return console.error("symptomStats ê³„ì‚° ì˜¤ë¥˜:",t),[]}}),d=(0,l.EW)(()=>{const t=p.value;if(!Array.isArray(t)||0===t.length)return[];const e=[...t],l=o?.value||"none";switch(l){case"percent-asc":return e.sort((t,e)=>t.percent-e.percent);case"percent-desc":return e.sort((t,e)=>e.percent-t.percent);default:return t}}),h=(0,l.EW)(()=>({hasData:n.value,hasHeaders:i.value,hasPatients:u.value,isReady:n.value&&i.value&&u.value,symptomCount:d.value.length})),m=()=>{try{const t=h.value;return t.isReady&&t.symptomCount>0}catch(t){return console.error("canUpdateChart ê²€ì¦ ì˜¤ë¥˜:",t),!1}};return{headers:a,rows:r,hasValidData:n,hasValidClinicalHeaders:i,hasValidPatientData:u,patientRows:s,totalPatients:c,symptomStats:p,sortedSymptomStats:d,chartStates:h,canUpdateChart:m}}function ct(t){const e=[14,16,18,20,24],o=(0,l.EW)(()=>[t("clinicalSymptoms.controls.fontSizeLabels.xs"),t("clinicalSymptoms.controls.fontSizeLabels.sm"),t("clinicalSymptoms.controls.fontSizeLabels.md"),t("clinicalSymptoms.controls.fontSizeLabels.lg"),t("clinicalSymptoms.controls.fontSizeLabels.xl")]),r=[500,700,900,1100],n=[30,50,70],i=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],s=(0,l.EW)(()=>[{key:"none",label:t("clinicalSymptoms.controls.highlightOptions.none.label"),tooltip:t("clinicalSymptoms.controls.highlightOptions.none.tooltip")},{key:"max",label:t("clinicalSymptoms.controls.highlightOptions.max.label"),tooltip:t("clinicalSymptoms.controls.highlightOptions.max.tooltip")},{key:"min",label:t("clinicalSymptoms.controls.highlightOptions.min.label"),tooltip:t("clinicalSymptoms.controls.highlightOptions.min.tooltip")},{key:"both",label:t("clinicalSymptoms.controls.highlightOptions.both.label"),tooltip:t("clinicalSymptoms.controls.highlightOptions.both.tooltip")}]),c=(0,l.EW)(()=>[{key:"none",label:t("clinicalSymptoms.controls.sortOptions.none.label"),tooltip:t("clinicalSymptoms.controls.sortOptions.none.tooltip")},{key:"percent-asc",label:t("clinicalSymptoms.controls.sortOptions.asc.label"),tooltip:t("clinicalSymptoms.controls.sortOptions.asc.tooltip")},{key:"percent-desc",label:t("clinicalSymptoms.controls.sortOptions.desc.label"),tooltip:t("clinicalSymptoms.controls.sortOptions.desc.tooltip")}]),u=(0,a.KR)(16),p=(0,a.KR)(700),d=(0,a.KR)(50),h=(0,a.KR)(i[0]),m=(0,a.KR)("vertical"),f=(0,a.KR)("none"),b=(0,a.KR)("none");return{fontSizes:e,fontSizeLabels:o,chartWidths:r,barWidthPercents:n,barColors:i,highlightOptions:s,sortOptions:c,chartFontSize:u,chartWidth:p,barWidthPercent:d,selectedBarColor:h,barDirection:m,currentHighlight:f,currentSort:b}}function ut(t){const{sortedSymptomStats:e,barDirection:o,chartFontSize:a,selectedBarColor:n,currentHighlight:i,barWidthPercent:s,t:c}=t,u=(0,l.EW)(()=>{try{const t=e.value;if(!Array.isArray(t)||0===t.length)return console.warn("chartOptions: ìœ íš¨í•˜ì§€ ì•Šì€ ì¦ìƒ ë°ì´í„°"),{title:{text:c("clinicalSymptoms.chart.noDataTitle")||"ìž„ìƒì¦ìƒ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤",subtext:c("clinicalSymptoms.chart.noDataSubtext")||"ë°ì´í„° ìž…ë ¥ í™”ë©´ì—ì„œ ì¦ìƒ ê´€ë ¨ ì—´ì— ë°ì´í„°ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”",left:"center",textStyle:{fontSize:18,fontFamily:"Noto Sans KR, sans-serif",color:"#666"},subtextStyle:{fontSize:14,color:"#999"}},graphic:{type:"text",left:"center",top:"60%",style:{text:c("clinicalSymptoms.chart.dataInputPrompt")||"ðŸ“‹ ì¦ìƒ ë°ì´í„° ìž…ë ¥ â†’ ì°¨íŠ¸ ìžë™ ìƒì„±",fontSize:16,fill:"#1a73e8",fontFamily:"Noto Sans KR, sans-serif"}}};const l="horizontal"===o.value,u=a.value||16,p=t.every(t=>t&&"string"===typeof t.name&&""!==t.name.trim());if(!p)return console.error("chartOptions: ìœ íš¨í•˜ì§€ ì•Šì€ ì¦ìƒëª… ë°ì´í„°"),{title:{text:c("clinicalSymptoms.chart.errorFormat")||"ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜"}};const d=t.map(t=>t.name),h=t.map(t=>{const e=Number(t.percent);return isNaN(e)?0:e}),m=Math.max(...h),f=Math.min(...h),b=h.map((t,e)=>t===m?e:-1).filter(t=>-1!==t),y=h.map((t,e)=>t===f?e:-1).filter(t=>-1!==t),v=t=>{let e=n.value;if("none"!==i.value){const o=b.includes(t),l=y.includes(t);"max"===i.value&&o?e="#ff6b6b":"min"===i.value&&l?e="#4ecdc4":"both"===i.value&&(o?e="#ff6b6b":l&&(e="#4ecdc4"))}return e};return console.log("ì°¨íŠ¸ ì˜µì…˜ ìƒì„±:",{direction:o.value,fontSize:u,color:n.value,dataCount:t.length}),{textStyle:{fontFamily:"Noto Sans KR, sans-serif"},title:{text:c("clinicalSymptoms.chart.distributionTitle")||"í™˜ìžì˜ ìž„ìƒì¦ìƒ ë¶„í¬",left:"center",textStyle:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"}},tooltip:{trigger:"axis",formatter(t){if(t&&t[0]){const o=t[0],l=e.value.find(t=>t.name===o.name);let a=`<strong>${o.name}</strong><br/>${o.seriesName}: <strong>${o.value}</strong>%`;return l&&(a+=` (${l.count}${c("clinicalSymptoms.frequencyTable.unitPerson")||"ëª…"})`),a}return""}},grid:{left:"8%",right:l?"20%":"8%",bottom:l?"15%":"10%",top:"15%",containLabel:!0},xAxis:l?{type:"value",name:c("clinicalSymptoms.frequencyTable.percent"),nameTextStyle:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"},axisLabel:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"},max:100,min:0}:{type:"category",data:d,axisLabel:{interval:0,rotate:t.length>10?30:0,fontSize:u,fontFamily:"Noto Sans KR, sans-serif"}},yAxis:l?{type:"category",data:d,axisLabel:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"}}:{type:"value",name:c("clinicalSymptoms.frequencyTable.percent"),nameTextStyle:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"},axisLabel:{fontSize:u,fontFamily:"Noto Sans KR, sans-serif"},max:100,min:0},series:[{name:c("clinicalSymptoms.chart.percentSeries")||"ë°±ë¶„ìœ¨",type:"bar",data:h,itemStyle:{color(t){const e=v(t.dataIndex),l=pt(e);return"horizontal"===o.value?new r.fA.W4(0,0,1,0,[{offset:0,color:l.darkColor},{offset:1,color:l.lightColor}]):new r.fA.W4(0,0,0,1,[{offset:0,color:l.lightColor},{offset:1,color:l.darkColor}])}},emphasis:{focus:"series",itemStyle:{color:l?new r.fA.W4(0,0,1,0,[{offset:0,color:"#F9A825"},{offset:1,color:"#FDB813"}]):new r.fA.W4(0,0,0,1,[{offset:0,color:"#FDB813"},{offset:1,color:"#F9A825"}])}},label:{show:!0,position:l?"right":"top",fontSize:Math.max(10,u-2),formatter:"{c}%",fontFamily:"Noto Sans KR, sans-serif",color:"#333"},barWidth:`${s.value}%`}]}}catch(t){return console.error("chartOptions ìƒì„± ì˜¤ë¥˜:",t),{title:{text:c("clinicalSymptoms.chart.errorGenerate")||"ì°¨íŠ¸ ìƒì„± ì˜¤ë¥˜"}}}});return{chartOptions:u,generateGradientColors:pt}}function pt(t){const e=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},o=(t,e,o)=>`#${((1<<24)+(t<<16)+(e<<8)+o).toString(16).slice(1)}`,l=(t,l)=>{const a=e(t);if(!a)return t;const r=l/100,n=Math.min(255,Math.max(0,Math.round(a.r+(255-a.r)*r))),i=Math.min(255,Math.max(0,Math.round(a.g+(255-a.g)*r))),s=Math.min(255,Math.max(0,Math.round(a.b+(255-a.b)*r)));return o(n,i,s)},a=l(t,30),r=t;return{lightColor:a,darkColor:r}}var dt=o(2213);function ht(t){const{chartInstance:e,chartWidth:o}=t,l=(0,a.KR)(!1),n=(0,a.KR)(!1),i=async()=>{let t=null;try{const e=document.querySelector(".analysis-table-container");if(e&&(t=e.querySelector(".frequency-table")),t||(t=document.querySelector(".frequency-table")),!t)return console.warn("copyTableToClipboard: í…Œì´ë¸” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"),void(l.value=!1);const o=t.cloneNode(!0),a={borderCollapse:"collapse",border:"1px solid #888",fontSize:"14px",width:"100%"};Object.assign(o.style,a);const r={border:"1px solid #888",padding:"8px 4px",textAlign:"center"},n={...r,background:"#f2f2f2",fontWeight:"bold"};o.querySelectorAll("th").forEach(t=>{Object.assign(t.style,n)}),o.querySelectorAll("td").forEach(t=>{Object.assign(t.style,r)}),o.querySelectorAll("tbody tr").forEach(t=>{const e=t.querySelector("td");e&&(e.style.textAlign="left")});const i=o.outerHTML,s=t.innerText;navigator.clipboard&&window.ClipboardItem?await navigator.clipboard.write([new window.ClipboardItem({"text/html":new Blob([i],{type:"text/html"}),"text/plain":new Blob([s],{type:"text/plain"})})]):await navigator.clipboard.writeText(s),l.value=!0,setTimeout(()=>l.value=!1,1500),console.log("í…Œì´ë¸” ë³µì‚¬ ì™„ë£Œ")}catch(e){console.error("í…Œì´ë¸” ë³µì‚¬ ì˜¤ë¥˜:",e),l.value=!1}},s=async()=>{const t=e.value;if(!t||"function"!==typeof t.getDataURL)return console.warn("copyChartToClipboard: ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ê±°ë‚˜ getDataURL í•¨ìˆ˜ê°€ ì—†ìŒ"),void(n.value=!1);if(!navigator.clipboard||!navigator.clipboard.write)return console.warn("copyChartToClipboard: í´ë¦½ë³´ë“œ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ"),void(n.value=!1);if("undefined"===typeof ClipboardItem)return console.warn("copyChartToClipboard: ClipboardItemì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ"),void(n.value=!1);try{const e=document.createElement("div");e.style.width=`${o.value}px`,e.style.height="600px",e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e);const l=r.Ts(e),a=t.getOption();a.animation=!1,l.setOption(a,!0),await new Promise(t=>setTimeout(t,100));const i=l.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!i||!i.startsWith("data:image/png"))throw new Error("ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€ ë°ì´í„° URL");const s=await fetch(i);if(!s.ok)throw new Error(`ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨: ${s.statusText}`);const c=await s.blob();await navigator.clipboard.write([new ClipboardItem({[c.type]:c})]),l.dispose(),document.body.removeChild(e),n.value=!0,setTimeout(()=>n.value=!1,1500),console.log("ì°¨íŠ¸ ë³µì‚¬ ì™„ë£Œ")}catch(l){console.error("ì°¨íŠ¸ ë³µì‚¬ ì˜¤ë¥˜:",l),n.value=!1}},c=async()=>{const t=e.value;if(!t||"function"!==typeof t.getDataURL)return void(0,dt.P0)("ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸° ë¶ˆê°€","error");const l=`ìž„ìƒì¦ìƒ_ë¶„ì„_${(new Date).toISOString().split("T")[0]}.png`;try{const e=document.createElement("div");e.style.width=`${o.value}px`,e.style.height="600px",e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e);const a=r.Ts(e),n=t.getOption();n.animation=!1,a.setOption(n,!0),await new Promise(t=>setTimeout(t,100));const i=a.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!i||!i.startsWith("data:image/png"))throw new Error("ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë¯¸ì§€ ë°ì´í„° URL");const s=document.createElement("a");s.href=i,s.download=l,document.body.appendChild(s),s.click(),document.body.removeChild(s),a.dispose(),document.body.removeChild(e),console.log("ì°¨íŠ¸ ì €ìž¥ ì™„ë£Œ:",l)}catch(a){const t=`ì°¨íŠ¸ ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜: ${a.message}`;console.error(t),(0,dt.P0)(t,"error")}};return{isTableCopied:l,isChartCopied:n,copyTableToClipboard:i,copyChartToClipboard:s,exportChart:c}}const mt={class:"bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen"},ft={class:"flex items-center justify-between px-4 py-2 bg-white/80 backdrop-blur-md border-b border-white/20 shadow-glass z-[4] sticky top-0"},bt={class:"flex flex-col p-6 max-w-[1600px] mx-auto w-full"},yt={class:"mb-6"},vt={class:"flex gap-6 items-start flex-wrap lg:flex-nowrap"},xt={class:"flex-1 min-w-[500px] bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden flex flex-col h-fit lg:max-w-[550px]"},gt={class:"flex-[1.5] min-w-[600px] bg-white rounded-2xl shadow-premium border border-slate-100 p-6 flex flex-col gap-6"};var St=(0,l.pM)({__name:"index",setup(t){const{t:e}=(0,P.s9)(),{fontSizes:o,fontSizeLabels:s,chartWidths:c,barWidthPercents:u,barColors:p,highlightOptions:d,sortOptions:m,chartFontSize:f,chartWidth:b,barWidthPercent:y,selectedBarColor:v,barDirection:x,currentHighlight:g,currentSort:S}=ct(e),{sortedSymptomStats:w,symptomStats:C,chartStates:k,canUpdateChart:L}=st({currentSort:S}),{chartOptions:W}=ut({sortedSymptomStats:w,barDirection:x,chartFontSize:f,selectedBarColor:v,currentHighlight:g,barWidthPercent:y,t:e}),R=(0,a.KR)(null),$=(0,a.KR)(null),{isTableCopied:z,isChartCopied:E,copyTableToClipboard:F,copyChartToClipboard:_,exportChart:V}=ht({chartInstance:R,chartWidth:b}),O=(0,n.A)(()=>{console.log("Debounced chart render triggered"),B()},150),B=()=>{try{const t=$.value?.chartContainerRef;if(!t)return void console.warn("renderChart: ì°¨íŠ¸ ì»¨í…Œì´ë„ˆê°€ ì—†ìŒ");if(!L())return void console.warn("renderChart: ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ë¶ˆê°€ ìƒíƒœ");const e=k.value;console.log("ì°¨íŠ¸ ë Œë”ë§ ì‹œìž‘:",e),R.value||(R.value=(0,a.IG)(r.Ts(t)),console.log("ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¨"));const o=W.value;o&&"object"===typeof o?(R.value.setOption(o,!1),console.log("ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ")):console.error("renderChart: ìœ íš¨í•˜ì§€ ì•Šì€ ì°¨íŠ¸ ì˜µì…˜")}catch(t){console.error("renderChart ì˜¤ë¥˜:",t)}},K=()=>{if(console.log("Attempting to recreate chart..."),R.value&&"function"===typeof R.value.dispose)try{R.value.dispose(),console.log("Previous chart instance disposed.")}catch(t){console.error("Error disposing chart instance:",t)}finally{R.value=null}(0,l.dY)(()=>{const t=$.value?.chartContainerRef;if(t instanceof HTMLElement)try{console.log(`Initializing new chart in container with width: ${t.offsetWidth}px`),R.value=(0,a.IG)(r.Ts(t)),console.log("New chart instance initialized."),B()}catch(e){console.error("ECharts ìž¬ì´ˆê¸°í™” ì‹¤íŒ¨:",e),(0,dt.P0)("ì°¨íŠ¸ë¥¼ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}else console.error("ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")})};return(0,l.sV)(()=>{console.log("ClinicalSymptoms ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨"),(0,l.dY)(()=>{L()&&B()})}),(0,l.hi)(()=>{if(R.value&&"function"===typeof R.value.dispose)try{R.value.dispose(),R.value=null,console.log("ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬ ì™„ë£Œ")}catch(t){console.error("ì°¨íŠ¸ ì •ë¦¬ ì˜¤ë¥˜:",t)}O&&"function"===typeof O.cancel&&O.cancel(),console.log("ClinicalSymptoms ì»´í¬ë„ŒíŠ¸ cleanup ì™„ë£Œ")}),(0,l.wB)(b,(t,e)=>{t!==e&&R.value&&L()&&(console.log(`Chart width changed: ${e} -> ${t}. Recreating chart.`),(0,l.dY)(()=>{K()}))},{flush:"post"}),(0,l.wB)([C,x,v,f,g,y],([t,e,o,a,r,n],[i,s,c,u,p,d])=>{try{const h=t!==i,m=e!==s,f=o!==c,b=a!==u,y=r!==p,v=n!==d;if(!h&&!m&&!f&&!b&&!y&&!v)return;console.log("ì°¨íŠ¸ ì—…ë°ì´íŠ¸ triggered:",{hasStatsChange:h,hasDirectionChange:m,hasColorChange:f,hasFontChange:b,hasHighlightChange:y,hasBarWidthChange:v}),(0,l.dY)(()=>{L()&&O()})}catch(h){console.error("watch í•¸ë“¤ëŸ¬ ì˜¤ë¥˜:",h)}},{deep:!1,immediate:!1,flush:"post"}),(t,e)=>((0,l.uX)(),(0,l.CE)("div",mt,[(0,l.Lk)("header",ft,[(0,l.bF)(i.A)]),(0,l.Lk)("div",bt,[(0,l.Lk)("div",yt,[(0,l.bF)(h,{title:t.$t("clinicalSymptoms.title")},null,8,["title"])]),(0,l.Lk)("div",vt,[(0,l.Lk)("div",xt,[(0,l.bF)(T,{data:(0,a.R1)(w),"is-table-copied":(0,a.R1)(z),onCopy:(0,a.R1)(F)},null,8,["data","is-table-copied","onCopy"])]),(0,l.Lk)("div",gt,[(0,l.bF)(Y,{barDirection:(0,a.R1)(x),"onUpdate:barDirection":e[0]||(e[0]=t=>(0,a.i9)(x)?x.value=t:null),chartFontSize:(0,a.R1)(f),"onUpdate:chartFontSize":e[1]||(e[1]=t=>(0,a.i9)(f)?f.value=t:null),chartWidth:(0,a.R1)(b),"onUpdate:chartWidth":e[2]||(e[2]=t=>(0,a.i9)(b)?b.value=t:null),barWidthPercent:(0,a.R1)(y),"onUpdate:barWidthPercent":e[3]||(e[3]=t=>(0,a.i9)(y)?y.value=t:null),selectedBarColor:(0,a.R1)(v),"onUpdate:selectedBarColor":e[4]||(e[4]=t=>(0,a.i9)(v)?v.value=t:null),currentHighlight:(0,a.R1)(g),"onUpdate:currentHighlight":e[5]||(e[5]=t=>(0,a.i9)(g)?g.value=t:null),currentSort:(0,a.R1)(S),"onUpdate:currentSort":e[6]||(e[6]=t=>(0,a.i9)(S)?S.value=t:null),"font-sizes":(0,a.R1)(o),"font-size-labels":(0,a.R1)(s),"chart-widths":(0,a.R1)(c),"bar-width-percents":(0,a.R1)(u),"bar-colors":(0,a.R1)(p),"highlight-options":(0,a.R1)(d),"sort-options":(0,a.R1)(m)},null,8,["barDirection","chartFontSize","chartWidth","barWidthPercent","selectedBarColor","currentHighlight","currentSort","font-sizes","font-size-labels","chart-widths","bar-width-percents","bar-colors","highlight-options","sort-options"]),(0,l.bF)(nt,{ref_key:"symptomBarChartRef",ref:$,"chart-width":(0,a.R1)(b),"is-chart-copied":(0,a.R1)(E),onCopy:(0,a.R1)(_),onExport:(0,a.R1)(V)},null,8,["chart-width","is-chart-copied","onCopy","onExport"])])])])]))}});const wt=St;var Ct=wt},1215:function(t,e,o){o.d(e,{A:function(){return s}});var l=o(6768),a=o(4232);const r={class:"m-0 text-2xl font-light font-['Noto_Sans_KR'] text-slate-800"};var n=(0,l.pM)({__name:"CommonHeader",setup(t){return(t,e)=>((0,l.uX)(),(0,l.CE)("h1",r,(0,a.v_)(t.$t("common.appName")),1))}});const i=n;var s=i}}]);