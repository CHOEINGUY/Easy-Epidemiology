"use strict";(self["webpackChunkwebpage"]=self["webpackChunkwebpage"]||[]).push([[2],{360:function(e,t,a){a.d(t,{A:function(){return C}});var l=a(6768),o=a(4232);const r={class:"data-guide-wrapper"},n={class:"data-guide-card"},s={class:"guide-header"},i={class:"guide-icon-box"},c={class:"material-icons guide-main-icon"},u={class:"guide-title"},d={class:"guide-description"},p={class:"guide-steps"},h={class:"step-indicator"},b={class:"step-badge"},f={key:0,class:"step-line"},v={class:"step-content"},m={class:"step-text"};var g=(0,l.pM)({__name:"DataGuideMessage",props:{icon:{default:"info"},title:{},description:{},steps:{default:()=>[]}},setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",n,[(0,l.Lk)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("span",c,(0,o.v_)(e.icon),1)]),(0,l.Lk)("h2",u,(0,o.v_)(e.title),1),(0,l.Lk)("p",d,(0,o.v_)(e.description),1)]),(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.steps,(t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"step-card"},[(0,l.Lk)("div",h,[(0,l.Lk)("span",b,(0,o.v_)(t.number),1),Number(a)<e.steps.length-1?((0,l.uX)(),(0,l.CE)("div",f)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",v,[(0,l.Lk)("div",m,(0,o.v_)(t.text),1)])]))),128))])])]))}}),x=a(1241);const y=(0,x.A)(g,[["__scopeId","data-v-7f9c39d8"]]);var C=y},1215:function(e,t,a){a.d(t,{A:function(){return i}});var l=a(6768),o=a(4232);const r={class:"m-0 text-2xl font-light font-['Noto_Sans_KR'] text-slate-800"};var n=(0,l.pM)({__name:"CommonHeader",setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("h1",r,(0,o.v_)(e.$t("common.appName")),1))}});const s=n;var i=s},9545:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ct}});var l=a(6768),o=a(144),r=a(360),n=a(1215),s=a(4232);const i={class:"flex items-center gap-3 py-2"},c={class:"text-xl font-bold text-slate-800 tracking-tight"};var u=(0,l.pM)({__name:"SummaryBar",setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",i,[t[0]||(t[0]=(0,l.Lk)("div",{class:"p-2 bg-blue-100 text-blue-600 rounded-lg shadow-sm"},[(0,l.Lk)("span",{class:"material-icons text-2xl"},"people")],-1)),(0,l.Lk)("h2",c,(0,s.v_)(e.$t("patientChars.title")),1)]))}});const d=u;var p=d;const h={class:"flex flex-wrap gap-2 items-center"},b=["onClick"];var f=(0,l.pM)({__name:"VariableSelector",props:{headers:{},selectedIndex:{}},emits:["select"],setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",h,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.headers,(t,a)=>((0,l.uX)(),(0,l.CE)("button",{key:a,onClick:t=>e.$emit("select",a),class:(0,s.C4)(["px-6 py-2.5 rounded-full text-base font-medium transition-all duration-200 border shadow-sm select-none",[e.selectedIndex===a?"bg-blue-600 text-white border-blue-600 shadow-md ring-2 ring-blue-100":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300"]])},(0,s.v_)(""===t?e.$t("common.none"):t),11,b))),128))]))}});const v=f;var m=v,g=a(5130);function x(){const e=(0,o.KR)(null),t=(0,o.KR)(""),a=(a,l)=>{e.value=a,t.value=l},l=()=>{e.value=null};return{activeTooltip:e,tooltipText:t,showTooltip:a,hideTooltip:l}}const y={class:"flex flex-wrap gap-4 items-center justify-end"},C={class:"flex items-baseline bg-white px-4 py-2 rounded-xl shadow border border-slate-100"},k={class:"text-xs text-slate-500 font-medium mr-2"},w={class:"text-2xl font-bold text-slate-800 tracking-tight"},L={class:"text-xs text-slate-500 ml-1"},$={class:"flex items-baseline bg-white px-4 py-2 rounded-xl shadow border border-slate-100"},T={class:"text-xs text-slate-500 font-medium mr-2"},R={class:"text-2xl font-bold text-slate-800 tracking-tight"},S={class:"text-xs text-slate-500 ml-1"},_={class:"relative group"},E={class:"text-xs text-slate-500 font-medium mr-2"},W={class:"text-2xl font-bold text-slate-800 tracking-tight"},V={key:0,class:"absolute bottom-full mb-2 right-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"},M={key:0,class:"relative group"},P={class:"text-xs text-slate-500 font-medium mr-2"},F={class:"text-2xl font-bold text-slate-800 tracking-tight"},z={key:0,class:"absolute bottom-full mb-2 right-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var N=(0,l.pM)({__name:"ParticipantSummary",props:{totalParticipants:{},totalPatients:{},attackRate:{},confirmedRate:{},isConfirmedCaseColumnVisible:{type:Boolean}},setup(e){const{activeTooltip:t,tooltipText:a,showTooltip:r,hideTooltip:n}=x();return(e,i)=>((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",C,[(0,l.Lk)("span",k,(0,s.v_)(e.$t("patientChars.summary.totalParticipants")),1),(0,l.Lk)("span",w,(0,s.v_)(e.totalParticipants),1),(0,l.Lk)("span",L,(0,s.v_)(e.$t("patientChars.summary.unitPerson")),1)]),(0,l.Lk)("div",$,[(0,l.Lk)("span",T,(0,s.v_)(e.$t("patientChars.summary.totalPatients")),1),(0,l.Lk)("span",R,(0,s.v_)(e.totalPatients),1),(0,l.Lk)("span",S,(0,s.v_)(e.$t("patientChars.summary.unitPerson")),1)]),(0,l.Lk)("div",_,[(0,l.Lk)("div",{class:"flex items-baseline bg-white px-4 py-2 rounded-xl shadow border border-slate-100 cursor-help",onMouseenter:i[0]||(i[0]=t=>(0,o.R1)(r)("attackRate",e.$t("patientChars.summary.attackRateTooltip"))),onMouseleave:i[1]||(i[1]=(...e)=>(0,o.R1)(n)&&(0,o.R1)(n)(...e))},[(0,l.Lk)("span",E,(0,s.v_)(e.$t("patientChars.summary.attackRate")),1),(0,l.Lk)("span",W,(0,s.v_)(e.attackRate),1),i[4]||(i[4]=(0,l.Lk)("span",{class:"text-xs text-slate-500 ml-1"},"%",-1))],32),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>["attackRate"===(0,o.R1)(t)?((0,l.uX)(),(0,l.CE)("div",V,[(0,l.eW)((0,s.v_)((0,o.R1)(a))+" ",1),i[5]||(i[5]=(0,l.Lk)("div",{class:"absolute top-full right-4 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})]),e.isConfirmedCaseColumnVisible?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",{class:"flex items-baseline bg-white px-4 py-2 rounded-xl shadow border border-slate-100 cursor-help",onMouseenter:i[2]||(i[2]=t=>(0,o.R1)(r)("confirmedRate",e.$t("patientChars.summary.confirmedRateTooltip"))),onMouseleave:i[3]||(i[3]=(...e)=>(0,o.R1)(n)&&(0,o.R1)(n)(...e))},[(0,l.Lk)("span",P,(0,s.v_)(e.$t("patientChars.summary.confirmedRate")),1),(0,l.Lk)("span",F,(0,s.v_)(e.confirmedRate),1),i[6]||(i[6]=(0,l.Lk)("span",{class:"text-xs text-slate-500 ml-1"},"%",-1))],32),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>["confirmedRate"===(0,o.R1)(t)?((0,l.uX)(),(0,l.CE)("div",z,[(0,l.eW)((0,s.v_)((0,o.R1)(a))+" ",1),i[7]||(i[7]=(0,l.Lk)("div",{class:"absolute top-full right-4 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)]))}});const I=N;var X=I,q=a(2032),K=a(2213);function B(){const e=(0,o.KR)(!1),t=(0,o.KR)(!1),a=async()=>{const t=document.querySelector(".table-container .frequency-table")||document.querySelector(".frequency-table");if(t)try{const a=t.cloneNode(!0),l={borderCollapse:"collapse",border:"1px solid #888",fontSize:"14px",width:"100%"};Object.assign(a.style,l);const o={border:"1px solid #888",padding:"8px 4px",textAlign:"center"},r={...o,background:"#f2f2f2",fontWeight:"bold"};a.querySelectorAll("th").forEach(e=>{Object.assign(e.style,r)}),a.querySelectorAll("td").forEach(e=>{Object.assign(e.style,o)}),a.querySelectorAll("tbody tr").forEach(e=>{const t=e.querySelector("td");t&&(t.style.textAlign="left")});const n=a.outerHTML,s=t.innerText;navigator.clipboard&&window.ClipboardItem?await navigator.clipboard.write([new window.ClipboardItem({"text/html":new Blob([n],{type:"text/html"}),"text/plain":new Blob([s],{type:"text/plain"})})]):await navigator.clipboard.writeText(s),e.value=!0,setTimeout(()=>e.value=!1,1500)}catch(a){console.error("테이블 복사 오류:",a),e.value=!1}else e.value=!1},l=async(e,a)=>{const l=e;if(l&&"function"===typeof l.getDataURL)if(navigator.clipboard&&navigator.clipboard.write)if("undefined"!==typeof window.ClipboardItem)try{const e=document.createElement("div");e.style.width=`${a}px`,e.style.height="500px",e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e);const o=q.Ts(e),r=l.getOption();r.animation=!1,o.setOption(r,!0),await new Promise(e=>setTimeout(e,100));const n=o.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!n||!n.startsWith("data:image/png"))throw new Error("유효하지 않은 이미지 데이터 URL");const s=await fetch(n);if(!s.ok)throw new Error(`이미지 로드 실패: ${s.statusText}`);const i=await s.blob();await navigator.clipboard.write([new window.ClipboardItem({[i.type]:i})]),o.dispose(),document.body.removeChild(e),t.value=!0,setTimeout(()=>t.value=!1,1500),console.log("차트 복사 완료")}catch(o){console.error("차트 복사 오류:",o),t.value=!1}else t.value=!1;else t.value=!1;else t.value=!1},r=async(e,t,a,l)=>{const o=e;if(!o||"function"!==typeof o.getDataURL)return void(0,K.P0)("차트 내보내기 불가","error");const r="total"===l?"전체":"환자",n=`${a}_${r}_분포_고화질.png`;try{const e=document.createElement("div");e.style.width=`${t}px`,e.style.height="500px",e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e);const a=q.Ts(e),l=o.getOption();l.animation=!1,a.setOption(l,!0),await new Promise(e=>setTimeout(e,100));const r=a.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!r||!r.startsWith("data:image/png"))throw new Error("유효하지 않은 이미지 데이터 URL");const s=document.createElement("a");s.href=r,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),a.dispose(),document.body.removeChild(e),console.log("차트 저장 완료:",n)}catch(s){const e=`차트 내보내기 오류: ${s.message}`;console.error(e),(0,K.P0)(e,"error")}};return{isTableCopied:e,isChartCopied:t,copyTableToClipboard:a,copyChartToClipboard:l,exportChart:r}}const D={class:"relative inline-block"},A={class:"flex items-center"},O={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},j={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},U={class:"font-medium"},H={key:0,class:"absolute top-full left-1/2 -translate-x-1/2 mt-2 flex items-center justify-center p-2 bg-white rounded-full shadow-lg border border-slate-100 z-50"};var Q=(0,l.pM)({__name:"SharedIconButton",props:{icon:{},label:{},showSuccess:{type:Boolean}},emits:["click"],setup(e){return(e,t)=>((0,l.uX)(),(0,l.CE)("div",D,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("click")),class:"flex items-center gap-1.5 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-200 hover:bg-blue-50 transition-all shadow-sm"},[(0,l.Lk)("span",A,["copy"===e.icon?((0,l.uX)(),(0,l.CE)("svg",O,t[1]||(t[1]=[(0,l.Lk)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),(0,l.Lk)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)]))):"download"===e.icon?((0,l.uX)(),(0,l.CE)("svg",j,t[2]||(t[2]=[(0,l.Lk)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),(0,l.Lk)("polyline",{points:"7 10 12 15 17 10"},null,-1),(0,l.Lk)("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("span",U,(0,s.v_)(e.label),1)]),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 scale-50","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-50"},{default:(0,l.k6)(()=>[e.showSuccess?((0,l.uX)(),(0,l.CE)("div",H,t[3]||(t[3]=[(0,l.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,l.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,l.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,l.Q3)("",!0)]),_:1})]))}});const Y=Q;var G=Y;const J={class:"flex flex-col w-full h-full"},Z={class:"flex justify-between items-center px-5 py-4 border-b border-slate-100"},ee={class:"flex items-center text-slate-800 font-semibold text-base"},te={class:"overflow-auto flex-1 p-0"},ae={class:"w-full text-sm text-center border-collapse frequency-table"},le={class:"bg-slate-50 sticky top-0 z-10"},oe={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},re={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},ne={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},se={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},ie={class:"py-3 px-4 font-semibold text-slate-600 border-b border-slate-200"},ce={class:"py-3 px-4 text-slate-700"},ue={class:"py-3 px-4 text-slate-600"},de={class:"py-3 px-4 text-slate-600"},pe={class:"py-3 px-4 text-slate-600"},he={class:"py-3 px-4 text-slate-600"};var be=(0,l.pM)({__name:"FrequencyTable",props:{headerName:{},frequencyData:{}},setup(e){const{isTableCopied:t,copyTableToClipboard:a}=B(),r=()=>{a()};return(e,a)=>((0,l.uX)(),(0,l.CE)("div",J,[(0,l.Lk)("div",Z,[(0,l.Lk)("span",ee,[a[0]||(a[0]=(0,l.Lk)("span",{class:"w-1.5 h-1.5 rounded-full bg-blue-500 mr-2"},null,-1)),(0,l.eW)((0,s.v_)(""===e.headerName?e.$t("patientChars.frequencyTable.none"):e.headerName),1)]),(0,l.bF)(G,{icon:"copy",label:e.$t("patientChars.frequencyTable.copyTable"),showSuccess:(0,o.R1)(t),onClick:r},null,8,["label","showSuccess"])]),(0,l.Lk)("div",te,[(0,l.Lk)("table",ae,[(0,l.Lk)("thead",le,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",oe,(0,s.v_)(e.$t("patientChars.frequencyTable.category")),1),(0,l.Lk)("th",re,(0,s.v_)(e.$t("patientChars.frequencyTable.participantsCount")),1),(0,l.Lk)("th",ne,(0,s.v_)(e.$t("patientChars.frequencyTable.participantsRatio")),1),(0,l.Lk)("th",se,(0,s.v_)(e.$t("patientChars.frequencyTable.patientsCount")),1),(0,l.Lk)("th",ie,(0,s.v_)(e.$t("patientChars.frequencyTable.patientsRatio")),1)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.frequencyData,(e,t)=>((0,l.uX)(),(0,l.CE)("tr",{key:t,class:"border-b border-slate-100 hover:bg-slate-50/50 transition-colors"},[(0,l.Lk)("td",ce,(0,s.v_)(t),1),(0,l.Lk)("td",ue,(0,s.v_)(e.count),1),(0,l.Lk)("td",de,(0,s.v_)(e.totalPercentage?.toFixed(1))+"%",1),(0,l.Lk)("td",pe,(0,s.v_)(e.patientCount),1),(0,l.Lk)("td",he,(0,s.v_)(e.patientPercentage?.toFixed(1))+"%",1)]))),128))])])])]))}});const fe=be;var ve=fe;const me={class:"p-5 border-t border-slate-100 bg-slate-50/50 h-auto"},ge={class:"flex items-center text-slate-700 font-semibold mb-4"},xe={key:0,class:"flex flex-col gap-3"},ye={class:"text-sm font-medium text-slate-600 break-keep"},Ce=["value","onChange","placeholder"],ke={key:1,class:"text-sm text-slate-400 italic py-2"};var we=(0,l.pM)({__name:"LabelMappingPanel",props:{categories:{},modelValue:{default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=e,o=t,r=(e,t)=>{const l={...a.modelValue,[e]:t};o("update:modelValue",l),o("change")};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",me,[(0,l.Lk)("div",ge,[t[0]||(t[0]=(0,l.Lk)("span",{class:"w-1.5 h-1.5 rounded-full bg-blue-500 mr-2"},null,-1)),(0,l.eW)(" "+(0,s.v_)(e.$t("patientChars.labelMapping.title")),1)]),e.categories.length>0?((0,l.uX)(),(0,l.CE)("div",xe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.categories,t=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"grid grid-cols-[auto_1fr] items-center gap-3"},[(0,l.Lk)("span",ye,(0,s.v_)(t)+" :",1),(0,l.Lk)("input",{type:"text",value:e.modelValue[t]||"",onChange:e=>r(t,e.target.value),placeholder:e.$t("patientChars.labelMapping.placeholder"),class:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all placeholder:text-slate-400 placeholder:italic placeholder:text-xs"},null,40,Ce)]))),128))])):((0,l.uX)(),(0,l.CE)("div",ke,(0,s.v_)(e.$t("patientChars.labelMapping.noCategories")),1))]))}});const Le=we;var $e=Le;const Te={class:"flex items-center gap-2"},Re={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},Se=["onClick","onMouseenter"],_e={key:0,class:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Ee=(0,l.pM)({__name:"ControlGroup",props:{label:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(e){const t=(0,o.KR)(null);return(e,a)=>((0,l.uX)(),(0,l.CE)("div",Te,[e.label?((0,l.uX)(),(0,l.CE)("span",Re,(0,s.v_)(e.label),1)):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,o=>((0,l.uX)(),(0,l.CE)("div",{key:o.value,class:"relative group"},[(0,l.Lk)("button",{onClick:t=>e.$emit("update:modelValue",o.value),class:(0,s.C4)(["px-3 py-1.5 rounded-lg text-sm font-medium border transition-all duration-200 shadow-sm",[e.modelValue===o.value?"bg-blue-600 text-white border-blue-600 ring-1 ring-blue-500":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-blue-600 hover:border-blue-300"]]),onMouseenter:e=>t.value=o.value,onMouseleave:a[0]||(a[0]=e=>t.value=null)},(0,s.v_)(o.label),43,Se),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>[t.value===o.value&&o.tooltip?((0,l.uX)(),(0,l.CE)("div",_e,[(0,l.eW)((0,s.v_)(o.tooltip)+" ",1),a[1]||(a[1]=(0,l.Lk)("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:2},1024)]))),128))]))}});const We=Ee;var Ve=We;const Me={class:"flex items-center gap-2"},Pe={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},Fe={class:"relative group"},ze={key:0,class:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Ne=(0,l.pM)({__name:"ControlCycleText",props:{label:{default:""},modelValue:{},options:{},displayLabels:{default:()=>[]},tooltipPrefix:{default:"Change to"},suffix:{default:""},minWidthClass:{default:"min-w-[60px]"}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,r=t,n=(0,o.KR)(!1),i=(0,o.KR)(""),c=(0,o.KR)(null),u=(0,l.EW)(()=>a.options.map((e,t)=>{if("object"===typeof e&&null!==e&&"value"in e)return e;const l=a.displayLabels[t]||`${e}${a.suffix}`;return{value:e,label:l,tooltip:""}})),d=(0,l.EW)(()=>{const e=u.value.findIndex(e=>e.value===a.modelValue);return-1===e?0:e}),p=(0,l.EW)(()=>c.value?c.value:u.value[d.value]?.label||""),h=()=>{const e=(d.value+1)%u.value.length,t=u.value[e];if(r("update:modelValue",t.value),n.value){const t=(e+1)%u.value.length,l=u.value[t];c.value=l.label,l.tooltip?i.value=l.tooltip:i.value=`${a.tooltipPrefix} ${l.label}`}else c.value=null},b=()=>{const e=(d.value+1)%u.value.length,t=u.value[e];c.value=t.label,t.tooltip?i.value=t.tooltip:i.value=`${a.tooltipPrefix} ${t.label}`,n.value=!0},f=()=>{n.value=!1,c.value=null};return(0,l.wB)(()=>a.modelValue,()=>{n.value||(c.value=null)}),(e,t)=>((0,l.uX)(),(0,l.CE)("div",Me,[e.label?((0,l.uX)(),(0,l.CE)("span",Pe,(0,s.v_)(e.label),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",Fe,[(0,l.Lk)("button",{class:(0,s.C4)(["px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 shadow-sm hover:border-blue-400 hover:text-blue-600 transition-colors",e.minWidthClass]),onClick:h,onMouseenter:b,onMouseleave:f},(0,s.v_)(p.value),35),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>[n.value?((0,l.uX)(),(0,l.CE)("div",ze,[(0,l.eW)((0,s.v_)(i.value)+" ",1),t[0]||(t[0]=(0,l.Lk)("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})])]))}});const Ie=Ne;var Xe=Ie;const qe={class:"flex items-center gap-2 ml-auto"},Ke={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},Be={class:"relative group"},De={key:0,class:"absolute bottom-full mb-2 right-0 left-auto translate-x-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50 origin-bottom-right"};var Ae=(0,l.pM)({__name:"ControlCycleColor",props:{label:{default:""},modelValue:{},options:{},tooltip:{default:"Change color"}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,r=t,n=(0,o.KR)(!1),i=(0,o.KR)(""),c=()=>{const e=a.options.indexOf(a.modelValue),t=(e+1)%a.options.length;r("update:modelValue",a.options[t])},u=()=>{i.value=a.tooltip,n.value=!0},d=()=>{n.value=!1};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",qe,[e.label?((0,l.uX)(),(0,l.CE)("span",Ke,(0,s.v_)(e.label),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",Be,[(0,l.Lk)("button",{class:"w-8 h-8 rounded-full border-2 border-white ring-1 ring-slate-200 hover:scale-110 transition-transform shadow-sm",style:(0,s.Tr)({backgroundColor:e.modelValue}),onClick:c,onMouseenter:u,onMouseleave:d},null,36),(0,l.bF)(g.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,l.k6)(()=>[n.value?((0,l.uX)(),(0,l.CE)("div",De,[(0,l.eW)((0,s.v_)(i.value)+" ",1),t[0]||(t[0]=(0,l.Lk)("div",{class:"absolute top-full right-3 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,l.Q3)("",!0)]),_:1})])]))}});const Oe=Ae;var je=Oe,Ue=a(5384);const He={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-50/80 rounded-xl border border-slate-200 shadow-sm backdrop-blur-sm"};var Qe=(0,l.pM)({__name:"ChartControlPanel",props:{chartType:{default:"total"},dataType:{default:"count"},fontSize:{default:18},chartWidth:{default:700},barWidth:{default:50},barColor:{default:"#5470c6"},highlight:{default:"none"}},emits:["update:chartType","update:dataType","update:fontSize","update:chartWidth","update:barWidth","update:barColor","update:highlight"],setup(e){const{t:t}=(0,Ue.s9)(),a=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],o=(0,l.EW)(()=>[{key:"none",label:t("patientChars.chartControl.highlightNone"),tooltip:t("patientChars.chartControl.highlightNoneTooltip")},{key:"max",label:t("patientChars.chartControl.highlightMax"),tooltip:t("patientChars.chartControl.highlightMaxTooltip")},{key:"min",label:t("patientChars.chartControl.highlightMin"),tooltip:t("patientChars.chartControl.highlightMinTooltip")},{key:"both",label:t("patientChars.chartControl.highlightBoth"),tooltip:t("patientChars.chartControl.highlightBothTooltip")}]),r=(0,l.EW)(()=>o.value.map(e=>({value:e.key,label:e.label,tooltip:e.tooltip})));return(e,t)=>((0,l.uX)(),(0,l.CE)("div",He,[(0,l.bF)(Ve,{label:e.$t("patientChars.chartControl.target"),modelValue:e.chartType,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:chartType",t)),options:[{value:"total",label:e.$t("patientChars.chartControl.total"),tooltip:e.$t("patientChars.chartControl.totalTooltip")},{value:"patient",label:e.$t("patientChars.chartControl.patient"),tooltip:e.$t("patientChars.chartControl.patientTooltip")}]},null,8,["label","modelValue","options"]),t[7]||(t[7]=(0,l.Lk)("div",{class:"w-px h-8 bg-slate-200 mx-1"},null,-1)),(0,l.bF)(Ve,{label:e.$t("patientChars.chartControl.dataType"),modelValue:e.dataType,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:dataType",t)),options:[{value:"count",label:e.$t("patientChars.chartControl.dataCount"),tooltip:e.$t("patientChars.chartControl.dataCountTooltip")},{value:"percentage",label:e.$t("patientChars.chartControl.dataPercent"),tooltip:e.$t("patientChars.chartControl.dataPercentTooltip")}]},null,8,["label","modelValue","options"]),(0,l.bF)(Xe,{label:e.$t("patientChars.chartControl.fontSize"),modelValue:e.fontSize,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:fontSize",t)),options:[12,15,18,21,24],displayLabels:[e.$t("patientChars.chartControl.sizeVerySmall"),e.$t("patientChars.chartControl.sizeSmall"),e.$t("patientChars.chartControl.sizeNormal"),e.$t("patientChars.chartControl.sizeLarge"),e.$t("patientChars.chartControl.sizeVeryLarge")],tooltipPrefix:e.$t("patientChars.chartControl.sizeTooltipPrefix"),suffix:e.$t("patientChars.chartControl.sizeTooltipSuffix"),minWidthClass:"min-w-[60px]"},null,8,["label","modelValue","displayLabels","tooltipPrefix","suffix"]),(0,l.bF)(Xe,{label:e.$t("patientChars.chartControl.chartWidth"),modelValue:e.chartWidth,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update:chartWidth",t)),options:[500,700,900,1100],tooltipPrefix:e.$t("patientChars.chartControl.widthTooltipPrefix"),suffix:"px",minWidthClass:"min-w-[70px]"},null,8,["label","modelValue","tooltipPrefix"]),(0,l.bF)(Xe,{label:e.$t("patientChars.chartControl.barWidth"),modelValue:e.barWidth,"onUpdate:modelValue":t[4]||(t[4]=t=>e.$emit("update:barWidth",t)),options:[30,50,70],tooltipPrefix:e.$t("patientChars.chartControl.barWidthTooltipPrefix"),suffix:"%",minWidthClass:"min-w-[50px]"},null,8,["label","modelValue","tooltipPrefix"]),(0,l.bF)(Xe,{label:e.$t("patientChars.chartControl.highlight"),modelValue:e.highlight,"onUpdate:modelValue":t[5]||(t[5]=t=>e.$emit("update:highlight",t)),options:r.value,minWidthClass:"min-w-[100px]"},null,8,["label","modelValue","options"]),(0,l.bF)(je,{label:e.$t("patientChars.chartControl.barColor"),modelValue:e.barColor,"onUpdate:modelValue":t[6]||(t[6]=t=>e.$emit("update:barColor",t)),options:a,tooltip:e.$t("patientChars.chartControl.barColorTooltip")},null,8,["label","modelValue","tooltip"])]))}});const Ye=Qe;var Ge=Ye,Je=a(923);function Ze(e){const t=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},a=(e,t,a)=>`#${((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1)}`,l=(e,l)=>{const o=t(e);if(!o)return e;const r=l/100,n=Math.min(255,Math.max(0,Math.round(o.r+(255-o.r)*r))),s=Math.min(255,Math.max(0,Math.round(o.g+(255-o.g)*r))),i=Math.min(255,Math.max(0,Math.round(o.b+(255-o.b)*r)));return a(n,s,i)},o=l(e,30),r=e;return{lightColor:o,darkColor:r}}function et(e,t,a,l){const{chartFontSize:o,barWidthPercent:r,selectedBarColor:n,currentHighlight:s,getMappedLabel:i,t:c}=l;if(!t||"object"!==typeof t||0===Object.keys(t).length)return{};const u=Object.keys(t),d=u.map(e=>t[e]?t[e].count:0),p=u.map(e=>t[e]&&t[e].totalPercentage||0),h="percentage"===a?p:d,b=Math.max(...h),f=Math.min(...h),v=h.map((e,t)=>e===b?t:-1).filter(e=>-1!==e),m=h.map((e,t)=>e===f?t:-1).filter(e=>-1!==e),g=e=>{let t=n;if("none"!==s){const a=v.includes(e),l=m.includes(e);"max"===s&&a?t="#ff6b6b":"min"===s&&l?t="#4ecdc4":"both"===s&&(a?t="#ff6b6b":l&&(t="#4ecdc4"))}return t};return{textStyle:{fontFamily:"Noto Sans KR, sans-serif"},title:{text:c("patientChars.chartControl.totalDistributionTitle")?.replace("{header}",e||c("patientChars.frequencyTable.none"))||`전체 대상자 ${e||"(알 수 없음)"} 분포`,left:"center",textStyle:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{const l=Array.isArray(e)?e:[e];if(0===l.length)return"";const o=l[0],r=o.dataIndex,n=u[r],s=i(n),c=t[n];if(!c)return"";const d=o.value,p=o.seriesName;let h=`<strong>${s}</strong><br/>`;return"percentage"===a?(h+=`${p}: <strong>${d}</strong>%`,void 0!==c.count&&(h+=` (${c.count}명)`)):(h+=`${p}: <strong>${d}</strong>명`,void 0!==c.totalPercentage&&(h+=` (${c.totalPercentage.toFixed(1)}%)`)),h}},legend:{data:[{name:"percentage"===a?c("patientChars.frequencyTable.participantsRatio")||"대상자 비율":c("patientChars.frequencyTable.participantsCount")||"대상자 수",icon:"rect",itemStyle:{color:n}}],top:"bottom",selectedMode:!1,textStyle:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:{type:"category",data:u.map(e=>i(e)),axisLabel:{interval:0,rotate:u.length>10?30:0,fontSize:o,hideOverlap:!0,fontFamily:"Noto Sans KR, sans-serif"}},yAxis:{type:"value",axisLabel:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},series:[{name:"percentage"===a?c("patientChars.frequencyTable.participantsRatio")||"대상자 비율":c("patientChars.frequencyTable.participantsCount")||"대상자 수",type:"bar",data:h,itemStyle:{color:e=>{const t=e,a=g(t.dataIndex),l=Ze(a);return new q.fA.W4(0,0,0,1,[{offset:0,color:l.lightColor},{offset:1,color:l.darkColor}])}},barWidth:`${r}%`,emphasis:{focus:"series",itemStyle:{color:new q.fA.W4(0,0,0,1,[{offset:0,color:"#FDB813"},{offset:1,color:"#F9A825"}])}},label:{show:h.length<15,position:"top",fontSize:Math.max(10,o-4),color:"#333",fontFamily:"Noto Sans KR, sans-serif",formatter:e=>{const t=e,l=t.dataIndex,o=d[l],r=p[l].toFixed(1);return"percentage"===a?`${r}% (${o})`:`${o} (${r}%)`}}}]}}function tt(e,t,a,l){const{chartFontSize:o,barWidthPercent:r,selectedBarColor:n,currentHighlight:s,getMappedLabel:i,t:c}=l;if(!t||"object"!==typeof t||0===Object.keys(t).length)return{};const u=Object.keys(t),d=u.map(e=>t[e]?t[e].patientCount:0),p=u.map(e=>t[e]&&t[e].patientPercentage||0),h=[],b=[],f=[],v={};u.forEach((e,a)=>{d[a]>0&&(h.push(e),b.push(d[a]),f.push(p[a]),t[e]&&(v[e]=t[e]))});const m="percentage"===a?f:b;if(0===h.length)return{};const g=Math.max(...m),x=Math.min(...m),y=m.map((e,t)=>e===g?t:-1).filter(e=>-1!==e),C=m.map((e,t)=>e===x?t:-1).filter(e=>-1!==e),k=e=>{let t=n;if("none"!==s){const a=y.includes(e),l=C.includes(e);"max"===s&&a?t="#ff6b6b":"min"===s&&l?t="#4ecdc4":"both"===s&&(a?t="#ff6b6b":l&&(t="#4ecdc4"))}return t};return{textStyle:{fontFamily:"Noto Sans KR, sans-serif"},title:{text:c("patientChars.chartControl.patientDistributionTitle")?.replace("{header}",e||c("patientChars.frequencyTable.none"))||`환자 ${e||"(알 수 없음)"} 분포`,left:"center",textStyle:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{const t=Array.isArray(e)?e:[e];if(0===t.length)return"";const l=t[0],o=l.dataIndex,r=h[o],n=i(r),s=v[r];if(!s)return"";const c=l.value,u=l.seriesName;let d=`<strong>${n}</strong><br/>`;return"percentage"===a?(d+=`${u}: <strong>${c}</strong>%`,void 0!==s.patientCount&&(d+=` (${s.patientCount}명)`)):(d+=`${u}: <strong>${c}</strong>명`,void 0!==s.patientPercentage&&(d+=` (${s.patientPercentage.toFixed(1)}%)`)),d}},legend:{data:[{name:"percentage"===a?c("patientChars.frequencyTable.patientsRatio")||"환자 비율":c("patientChars.frequencyTable.patientsCount")||"환자 수",icon:"rect",itemStyle:{color:n}}],top:"bottom",selectedMode:!1,textStyle:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:h.map(e=>i(e)),axisLabel:{interval:0,rotate:h.length>10?30:0,fontSize:o,hideOverlap:!0,fontFamily:"Noto Sans KR, sans-serif"}},yAxis:{type:"value",axisLabel:{fontSize:o,fontFamily:"Noto Sans KR, sans-serif"}},series:[{name:"percentage"===a?c("patientChars.frequencyTable.patientsRatio")||"환자 비율":c("patientChars.frequencyTable.patientsCount")||"환자 수",type:"bar",data:m,itemStyle:{color:e=>{const t=e,a=k(t.dataIndex),l=Ze(a);return new q.fA.W4(0,0,0,1,[{offset:0,color:l.lightColor},{offset:1,color:l.darkColor}])}},barWidth:`${r}%`,emphasis:{focus:"series",itemStyle:{color:new q.fA.W4(0,0,0,1,[{offset:0,color:"#FDB813"},{offset:1,color:"#F9A825"}])}},label:{show:m.length<15,position:"top",fontSize:Math.max(10,o-4),color:"#333",fontFamily:"Noto Sans KR, sans-serif",formatter:e=>{const t=e,l=t.dataIndex,o=b[l],r=f[l].toFixed(1);return"percentage"===a?`${r}% (${o})`:`${o} (${r}%)`}}}]}}const at={class:"flex flex-col items-center justify-center p-5 bg-white rounded-2xl shadow-premium border border-slate-100 overflow-x-auto"},lt={class:"relative w-full flex justify-end gap-2 mb-2"};var ot=(0,l.pM)({__name:"BarChart",props:{chartWidth:{default:700},selectedVariableIndex:{default:null},selectedChartType:{default:"total"},selectedDataType:{default:"count"},frequencyData:{default:()=>[]},headers:{default:()=>({basic:[]})},chartFontSize:{default:18},barWidthPercent:{default:50},selectedBarColor:{default:"#5470c6"},currentHighlight:{default:"none"},labelMappings:{default:()=>({})}},emits:["copyChart","exportChart","chartInstance","chartUpdated"],setup(e,{expose:t,emit:a}){const r=e,n=a,{t:i}=(0,Ue.s9)(),c=(0,o.KR)(null),u=(0,o.KR)(null),{isChartCopied:d,copyChartToClipboard:p,exportChart:h}=B(),b=e=>{if(r.labelMappings&&Object.prototype.hasOwnProperty.call(r.labelMappings,e)){const t=r.labelMappings[e];if(t&&String(t).trim())return String(t).trim()}return e},f=()=>{if(!u.value||null===r.selectedVariableIndex||void 0===r.selectedVariableIndex)return;if(!r.headers?.basic||!r.frequencyData||r.frequencyData.length<=r.selectedVariableIndex)return void console.warn("차트 업데이트 건너뛰기: 데이터 준비 안됨");const e=r.headers.basic[r.selectedVariableIndex]||i("common.none"),t=r.frequencyData[r.selectedVariableIndex];if(!t||0===Object.keys(t).length)return void console.warn("차트 업데이트 건너뛰기: 빈 데이터");const a={chartFontSize:r.chartFontSize,barWidthPercent:r.barWidthPercent,selectedBarColor:r.selectedBarColor,currentHighlight:r.currentHighlight,getMappedLabel:b,t:i},l="total"===r.selectedChartType?et(e,t,r.selectedDataType,a):tt(e,t,r.selectedDataType,a);try{u.value&&"function"===typeof u.value.setOption?(u.value.setOption(l,!1),console.log("Chart options updated efficiently."),n("chartUpdated")):console.error("차트 인스턴스 유효하지 않음")}catch(o){console.error("ECharts setOption 오류:",o,l)}},v=()=>{if(console.log("Attempting to recreate chart..."),u.value&&"function"===typeof u.value.dispose)try{u.value.dispose(),console.log("Previous chart instance disposed.")}catch(e){console.error("Error disposing chart instance:",e)}finally{u.value=null}(0,l.dY)(()=>{if(c.value instanceof HTMLElement)try{console.log(`Initializing new chart in container with width: ${c.value.offsetWidth}px`),u.value=q.Ts(c.value),console.log("New chart instance initialized."),f()}catch(e){console.error("ECharts 재초기화 실패:",e),(0,K.P0)("차트를 다시 그리는 중 오류가 발생했습니다.","error")}else console.error("차트 컨테이너 DOM 요소를 찾을 수 없습니다.")})},m=(0,Je.A)(()=>{console.log("Debounced chart update triggered."),u.value&&null!==r.selectedVariableIndex?f():console.log("Chart instance not found or no variable selected, skipping update trigger.")},200),g=(0,Je.A)(()=>{if(u.value&&"function"===typeof u.value.resize&&null!==r.selectedVariableIndex)try{console.log("Resizing chart due to window resize..."),u.value.resize({animation:{duration:200,easing:"cubicOut"}})}catch(e){console.error("ECharts resize 오류 (window):",e)}},150),x=()=>{u.value&&r.chartWidth&&p(u.value,r.chartWidth)},y=()=>{if(u.value&&r.chartWidth){const e=r.headers?.basic?.[r.selectedVariableIndex||0]||"(없음)";h(u.value,r.chartWidth,e,r.selectedChartType)}};return(0,l.sV)(()=>{null!==r.selectedVariableIndex&&v(),window.addEventListener("resize",g)}),(0,l.hi)(()=>{if(window.removeEventListener("resize",g),u.value&&"function"===typeof u.value.dispose)try{u.value.dispose(),u.value=null,console.log("ECharts 인스턴스 정리 완료.")}catch(e){console.error("ECharts 인스턴스 정리 오류:",e)}m&&"function"===typeof m.cancel&&m.cancel(),g&&"function"===typeof g.cancel&&g.cancel(),c.value=null,console.log("컴포넌트 cleanup 완료")}),(0,l.wB)(()=>r.chartWidth,(e,t)=>{e!==t&&u.value&&null!==r.selectedVariableIndex&&(console.log(`Chart width changed: ${t} -> ${e}. Resizing chart.`),(0,l.dY)(()=>{if(u.value&&"function"===typeof u.value.resize)try{u.value.resize({width:e,animation:{duration:200,easing:"cubicOut"}}),console.log("Chart resized successfully.")}catch(t){console.error("Chart resize error, falling back to recreate:",t),v()}}))},{flush:"post"}),(0,l.wB)([()=>r.selectedVariableIndex,()=>r.selectedChartType,()=>r.selectedDataType,()=>r.frequencyData,()=>r.chartFontSize,()=>r.barWidthPercent,()=>r.selectedBarColor,()=>r.currentHighlight,()=>r.labelMappings],([e])=>{console.log("BarChart watcher triggered"),u.value&&null!==e?(console.log("Triggering optimized chart update"),(0,l.dY)(()=>{f()})):u.value||null===e||(console.log("Chart instance not found, recreating chart"),(0,l.dY)(()=>{v()}))},{deep:!0,immediate:!1,flush:"post"}),t({updateCharts:f,recreateChart:v,triggerChartUpdate:m}),(e,t)=>((0,l.uX)(),(0,l.CE)("div",at,[(0,l.Lk)("div",lt,[(0,l.bF)(G,{icon:"copy",label:e.$t("patientChars.chart.copy"),showSuccess:(0,o.R1)(d),onClick:x},null,8,["label","showSuccess"]),(0,l.bF)(G,{icon:"download",label:e.$t("patientChars.chart.save"),onClick:y},null,8,["label"])]),(0,l.Lk)("div",{ref_key:"chartContainer",ref:c,style:(0,s.Tr)({width:e.chartWidth+"px",height:"500px"})},null,4)]))}});const rt=ot;var nt=rt,st=a(1335),it=a(1412);function ct(){const e=(0,st.X)(),t=(0,it.C)(),a=(0,l.EW)(()=>e.headers||{basic:[]}),o=(0,l.EW)(()=>e.rows||[]),r=(0,l.EW)(()=>t.isConfirmedCaseColumnVisible),n=(0,l.EW)(()=>{const e=o.value||[];return e.filter(e=>{if(!e)return!1;const t=String(e.isPatient||""),a=e.basicInfo||[],l=e.clinicalSymptoms||[],o=String(e.symptomOnset||""),r=e.dietInfo||[];return""!==t||a.some(e=>""!==e&&null!==e&&void 0!==e)||l.some(e=>""!==e&&null!==e&&void 0!==e)||""!==o||r.some(e=>""!==e&&null!==e&&void 0!==e)})}),s=(0,l.EW)(()=>n.value.length),i=(0,l.EW)(()=>{const e=n.value;if(0===e.length)return 0;let t=0;for(const a of e)a&&"1"===String(a.isPatient)&&t++;return t}),c=(0,l.EW)(()=>{const e=s.value,t=i.value;return 0===e?"0.0":(t/e*100).toFixed(1)}),u=(0,l.EW)(()=>{const e=n.value;if(0===e.length)return 0;let t=0;for(const a of e)a&&"1"===String(a.isConfirmedCase)&&t++;return t}),d=(0,l.EW)(()=>{const e=s.value,t=u.value;return 0===e?"0.0":(t/e*100).toFixed(1)}),p=(0,l.EW)(()=>{if(!a.value?.basic||!Array.isArray(a.value.basic))return[];const e=n.value,t=s.value;return a.value.basic.map((a,l)=>{const o={};e.forEach(e=>{const t=e.basicInfo;if(!t||l>=t.length)return;const a=t[l];if(""===a||null===a||void 0===a)return;const r=String(a);o[r]||(o[r]={count:0,patientCount:0}),o[r].count++,"1"===String(e.isPatient)&&o[r].patientCount++});for(const e in o){const a=o[e];a.totalPercentage=t>0?a.count/t*100:0,a.patientPercentage=a.count>0?a.patientCount/a.count*100:0}const r={};return Object.keys(o).sort((e,t)=>{const a=Number(e),l=Number(t);return isNaN(a)||isNaN(l)?!isNaN(a)&&isNaN(l)?-1:isNaN(a)&&!isNaN(l)?1:String(e).localeCompare(String(t),void 0,{numeric:!0}):a-l}).forEach(e=>{r[e]=o[e]}),r})}),h=e=>{if(!a.value?.basic||e<0||e>=a.value.basic.length)return{};const t=n.value,l=s.value,o={};t.forEach(t=>{const a=t.basicInfo;if(!a||e>=a.length)return;const l=a[e];if(""===l||null===l||void 0===l)return;const r=String(l);o[r]||(o[r]={count:0,patientCount:0}),o[r].count++,"1"===String(t.isPatient)&&o[r].patientCount++});for(const a in o){const e=o[a];e.totalPercentage=l>0?e.count/l*100:0,e.patientPercentage=e.count>0?e.patientCount/e.count*100:0}const r={};return Object.keys(o).sort((e,t)=>{const a=Number(e),l=Number(t);return isNaN(a)||isNaN(l)?!isNaN(a)&&isNaN(l)?-1:isNaN(a)&&!isNaN(l)?1:String(e).localeCompare(String(t),void 0,{numeric:!0}):a-l}).forEach(e=>{r[e]=o[e]}),r};return{headers:a,rows:o,isConfirmedCaseColumnVisible:r,filteredRows:n,totalParticipants:s,totalPatients:i,attackRate:c,totalConfirmedCases:u,confirmedRate:d,frequencyData:p,getFrequencyForVariable:h}}const ut={class:"bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen"},dt={class:"flex items-center justify-between px-4 py-2 bg-white/80 backdrop-blur-md border-b border-white/20 shadow-glass z-[4] sticky top-0"},pt={class:"flex flex-col p-6 max-w-[1600px] mx-auto w-full"},ht={class:"mb-6"},bt={class:"bg-white/60 backdrop-blur-sm border border-white/40 rounded-2xl shadow-glass p-5 mb-6 flex justify-between items-center flex-wrap gap-4"},ft={key:0,class:"flex gap-6 items-start flex-wrap lg:flex-nowrap"},vt={class:"flex-1 min-w-[500px] bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden flex flex-col h-fit lg:max-w-[550px]"},mt={class:"flex-[1.5] min-w-[600px] bg-white rounded-2xl shadow-premium border border-slate-100 p-6 flex flex-col gap-6 relative"},gt={key:1,class:"p-10 text-center text-slate-500 bg-white/60 backdrop-blur-sm rounded-2xl border border-white/40 shadow-glass"};var xt=(0,l.pM)({__name:"index",setup(e){const{headers:t,isConfirmedCaseColumnVisible:a,totalParticipants:s,totalPatients:i,attackRate:c,confirmedRate:u,frequencyData:d}=ct(),{isTableCopied:h,copyTableToClipboard:b}=B(),{t:f}=(0,Ue.s9)(),v=(0,o.KR)(null),g=(0,o.KR)("total"),x=(0,o.KR)("count"),y=(0,o.KR)(18),C=(0,o.KR)(700),k=(0,o.KR)(50),w=(0,o.KR)("#5470c6"),L=(0,o.KR)("none"),$=(0,o.KR)({}),T=(0,o.KR)(null),R=(0,l.EW)(()=>null===v.value?"":t.value?.basic?.[v.value]||""),S=(0,l.EW)(()=>null===v.value?{}:d.value?.[v.value]||{}),_=(0,l.EW)(()=>null!==v.value&&d.value&&d.value.length>v.value&&d.value[v.value]?Object.keys(d.value[v.value]):[]),E=e=>{v.value=e},W=()=>{T.value&&T.value.triggerChartUpdate()};return(0,l.sV)(()=>{t.value?.basic?.length>0&&null===v.value&&E(0)}),(0,l.wB)(v,(e,t)=>{if(e!==t&&null!==e){console.log(`Variable changed: ${t} -> ${e}`),$.value={};const a=d.value?.[e];if(a&&"object"===typeof a){const e=Object.keys(a),t={};e.forEach(e=>{t[e]=""}),$.value=t,console.log("Initialized mappings efficiently")}}}),(e,f)=>((0,l.uX)(),(0,l.CE)("div",ut,[(0,l.Lk)("header",dt,[(0,l.bF)(n.A)]),(0,l.Lk)("div",pt,[(0,l.Lk)("div",ht,[(0,l.bF)(p)]),(0,l.Lk)("div",bt,[(0,l.bF)(m,{headers:(0,o.R1)(t).basic||[],selectedIndex:v.value,onSelect:E},null,8,["headers","selectedIndex"]),(0,l.bF)(X,{totalParticipants:(0,o.R1)(s),totalPatients:(0,o.R1)(i),attackRate:(0,o.R1)(c),confirmedRate:(0,o.R1)(u),isConfirmedCaseColumnVisible:(0,o.R1)(a)},null,8,["totalParticipants","totalPatients","attackRate","confirmedRate","isConfirmedCaseColumnVisible"])]),null!==v.value?((0,l.uX)(),(0,l.CE)("div",ft,[(0,l.Lk)("div",vt,[(0,l.bF)(ve,{headerName:R.value,frequencyData:S.value,"is-table-copied":(0,o.R1)(h),onCopy:(0,o.R1)(b)},null,8,["headerName","frequencyData","is-table-copied","onCopy"]),(0,l.bF)($e,{categories:_.value,modelValue:$.value,"onUpdate:modelValue":f[0]||(f[0]=e=>$.value=e),onChange:W},null,8,["categories","modelValue"])]),(0,l.Lk)("div",mt,[(0,l.bF)(Ge,{chartType:g.value,"onUpdate:chartType":f[1]||(f[1]=e=>g.value=e),dataType:x.value,"onUpdate:dataType":f[2]||(f[2]=e=>x.value=e),fontSize:y.value,"onUpdate:fontSize":f[3]||(f[3]=e=>y.value=e),chartWidth:C.value,"onUpdate:chartWidth":f[4]||(f[4]=e=>C.value=e),barWidth:k.value,"onUpdate:barWidth":f[5]||(f[5]=e=>k.value=e),barColor:w.value,"onUpdate:barColor":f[6]||(f[6]=e=>w.value=e),highlight:L.value,"onUpdate:highlight":f[7]||(f[7]=e=>L.value=e)},null,8,["chartType","dataType","fontSize","chartWidth","barWidth","barColor","highlight"]),(0,l.bF)(nt,{ref_key:"barChartRef",ref:T,chartWidth:C.value,selectedVariableIndex:v.value,selectedChartType:g.value,selectedDataType:x.value,frequencyData:(0,o.R1)(d),headers:(0,o.R1)(t),chartFontSize:y.value,barWidthPercent:k.value,selectedBarColor:w.value,currentHighlight:L.value,labelMappings:$.value},null,8,["chartWidth","selectedVariableIndex","selectedChartType","selectedDataType","frequencyData","headers","chartFontSize","barWidthPercent","selectedBarColor","currentHighlight","labelMappings"])])])):((0,l.uX)(),(0,l.CE)("div",gt,[(0,l.bF)(r.A,{icon:"analytics",title:e.$t("patientChars.guide.title"),description:e.$t("patientChars.guide.description"),steps:[{number:"1",text:e.$t("patientChars.guide.step1")},{number:"2",text:e.$t("patientChars.guide.step2")},{number:"3",text:e.$t("patientChars.guide.step3")}]},null,8,["title","description","steps"])]))])]))}});const yt=xt;var Ct=yt}}]);