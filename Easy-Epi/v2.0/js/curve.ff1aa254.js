"use strict";(self["webpackChunkwebpage"]=self["webpackChunkwebpage"]||[]).push([[51,748],{360:function(e,t,a){a.d(t,{A:function(){return C}});var o=a(6768),l=a(4232);const i={class:"data-guide-wrapper"},s={class:"data-guide-card"},n={class:"guide-header"},r={class:"guide-icon-box"},u={class:"material-icons guide-main-icon"},d={class:"guide-title"},c={class:"guide-description"},p={class:"guide-steps"},m={class:"step-indicator"},v={class:"step-badge"},b={key:0,class:"step-line"},h={class:"step-content"},f={class:"step-text"};var x=(0,o.pM)({__name:"DataGuideMessage",props:{icon:{default:"info"},title:{},description:{},steps:{default:()=>[]}},setup(e){return(e,t)=>((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",s,[(0,o.Lk)("div",n,[(0,o.Lk)("div",r,[(0,o.Lk)("span",u,(0,l.v_)(e.icon),1)]),(0,o.Lk)("h2",d,(0,l.v_)(e.title),1),(0,o.Lk)("p",c,(0,l.v_)(e.description),1)]),(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.steps,(t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:"step-card"},[(0,o.Lk)("div",m,[(0,o.Lk)("span",v,(0,l.v_)(t.number),1),Number(a)<e.steps.length-1?((0,o.uX)(),(0,o.CE)("div",b)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",h,[(0,o.Lk)("div",f,(0,l.v_)(t.text),1)])]))),128))])])]))}}),g=a(1241);const y=(0,g.A)(x,[["__scopeId","data-v-7f9c39d8"]]);var C=y},6051:function(e,t,a){function o(e){if(!e||"string"!==typeof e)return null;const t=e.trim(),a=/^(\d{4})-(\d{1,2})-(\d{1,2})[\sT]+(\d{1,2}):(\d{1,2})$/;let o=t.match(a);if(o)return l(o[1],o[2],o[3],o[4],o[5]);const i=/^(\d{4})-(\d{1,2})-(\d{1,2})[\sT]+(\d{1,2}):(\d{1,2}):\d{1,2}$/;if(o=t.match(i),o)return l(o[1],o[2],o[3],o[4],o[5]);const s=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;if(o=t.match(s),o)return l(o[1],o[2],o[3],"00","00");const n=/^(\d{4})\/(\d{1,2})\/(\d{1,2})[\sT]+(\d{1,2}):(\d{1,2})$/;if(o=t.match(n),o)return l(o[1],o[2],o[3],o[4],o[5]);const r=/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/;if(o=t.match(r),o)return l(o[1],o[2],o[3],"00","00");const u=/^(\d{4})\.(\d{1,2})\.(\d{1,2})[\sT]+(\d{1,2}):(\d{1,2})$/;if(o=t.match(u),o)return l(o[1],o[2],o[3],o[4],o[5]);const d=/^(\d{4})\.(\d{1,2})\.(\d{1,2})$/;return o=t.match(d),o?l(o[1],o[2],o[3],"00","00"):null}function l(e,t,a,o,l){const i=parseInt(e),r=parseInt(t),u=parseInt(a);return s(i,r,u)&&n(o,l)?{year:i,month:r,day:u,hour:o,minute:l}:null}function i(e){if(!e||"object"!==typeof e)return"";const{year:t,month:a,day:o,hour:l,minute:i}=e;if(!t||!a||!o||void 0===l||void 0===i)return"";if(!s(t,a,o))return"";if(!n(l,i))return"";const r=String(a).padStart(2,"0"),u=String(o).padStart(2,"0"),d=String(l).padStart(2,"0"),c=String(i).padStart(2,"0");return`${t}-${r}-${u} ${d}:${c}`}function s(e,t,a){if(e<1900||e>2100)return!1;if(t<1||t>12)return!1;if(a<1||a>31)return!1;const o=new Date(e,t-1,a);return o.getFullYear()===e&&o.getMonth()===t-1&&o.getDate()===a}function n(e,t){const a="string"===typeof e?parseInt(e):e,o="string"===typeof t?parseInt(t):t;return a>=0&&a<=23&&o>=0&&o<=59}function r(){const e=new Date;return i({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0")})}function u(){const e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0")}}function d(e){const t=o(e);return null!==t}function c(e){if(!e||"string"!==typeof e)return"";let t=e.trim();t=t.replace(/\s+/g," ");const a=o(t);return a?i(a):t}function p(e,t){let a,l;return a="string"===typeof e?o(e):e||null,l="string"===typeof t?o(t):t||null,!a&&!l||!(!a||!l)&&(a.year===l.year&&a.month===l.month&&a.day===l.day&&a.hour===l.hour&&a.minute===l.minute)}function m(e,t){let a,l;if(a="string"===typeof e?o(e):e,l="string"===typeof t?o(t):t,!a||!l)return!1;const i="string"===typeof a.hour?parseInt(a.hour):a.hour,s="string"===typeof a.minute?parseInt(a.minute):a.minute,n="string"===typeof l.hour?parseInt(l.hour):l.hour,r="string"===typeof l.minute?parseInt(l.minute):l.minute,u=new Date(a.year,a.month-1,a.day,i,s),d=new Date(l.year,l.month-1,l.day,n,r);return u<=d}function v(e){if(!e||"string"!==typeof e)return null;const t=e.trim();if(d(t))return t;const a=[/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):\d{2}$/,/^(\d{4})\/(\d{2})\/(\d{2})\s+(\d{2}):(\d{2})$/,/^(\d{4})\.(\d{2})\.(\d{2})\s+(\d{2}):(\d{2})$/,/^(\d{4})-(\d{2})-(\d{2})$/];for(const o of a){const e=t.match(o);if(e){const t=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),l=e[4]?e[4]:"00",r=e[5]?e[5]:"00";if(s(t,a,o)&&n(l,r))return i({year:t,month:a,day:o,hour:l,minute:r})}}return null}a.r(t),a.d(t,{formatDateTime:function(){return i},getCurrentDateTime:function(){return r},getCurrentDateTimeObject:function(){return u},isEqualDateTime:function(){return p},isValidDate:function(){return s},isValidDateTimeRange:function(){return m},isValidDateTimeString:function(){return d},isValidTime:function(){return n},normalizeDateTimeString:function(){return c},parseDateTime:function(){return o},tryParseUserInput:function(){return v}})},7646:function(e,t,a){a.r(t),a.d(t,{default:function(){return qa}});var o=a(6768),l=a(4232),i=a(144),s=a(1412),n=a(5384);const r={class:"flex items-center gap-3 py-2"},u={class:"text-xl font-bold text-slate-800 tracking-tight"};var d=(0,o.pM)({__name:"SummaryBar",props:{title:{}},setup(e){return(e,t)=>((0,o.uX)(),(0,o.CE)("div",r,[t[0]||(t[0]=(0,o.Lk)("div",{class:"p-2 bg-blue-100 text-blue-600 rounded-lg shadow-sm"},[(0,o.Lk)("span",{class:"material-icons text-2xl"},"show_chart")],-1)),(0,o.Lk)("h2",u,(0,l.v_)(e.title),1)]))}});const c=d;var p=c,m=a(5130);function v(){const e=(0,s.C)(),{t:t}=a(169).A.global,l=(0,i.KR)(e.selectedSuspectedFoods||""),n=(0,i.KR)(!1),r=(0,i.KR)(new Set),u=(0,i.KR)(!1),d=(0,i.KR)(null),c=(0,o.EW)(()=>{const t=e.analysisResults;if(!t)return[];const a=t.caseControl||[],o=t.cohort||[];return a.length>0?a:o}),p=(0,o.EW)(()=>c.value&&0!==c.value.length?[...c.value].filter(e=>null!==e.pValue&&void 0!==e.pValue).sort((e,t)=>{const a=e.pValue??1,o=t.pValue??1;return a-o}):[]),m=(0,o.EW)(()=>{const t=e.analysisResults,a=t&&((t.caseControl?.length??0)>0||(t.cohort?.length??0)>0);return!!a||p.value.length>0}),v=(0,o.EW)(()=>{const t=e.analysisResults;return t?t.caseControl&&t.caseControl.length>0?t.caseControl.map(e=>({...e,type:"caseControl"})):t.cohort&&t.cohort.length>0?t.cohort.map(e=>({...e,type:"cohort"})):[]:[]}),b=(0,o.EW)(()=>{const a=e.analysisResults,o=a?.caseControl?.length||0,l=a?.cohort?.length||0,i=o>0||l>0;return i?o>0?{type:"success",message:t("epidemicCurve.suspectedFood.status.caseControlSuccess",{count:o})}:{type:"success",message:t("epidemicCurve.suspectedFood.status.cohortSuccess",{count:l})}:{type:"warning",message:t("epidemicCurve.suspectedFood.status.pending")}}),h=e=>{switch(e.type){case"success":return t("epidemicCurve.suspectedFood.tooltip.success");case"warning":return e.message.includes(t("epidemicCurve.suspectedFood.status.pending"))?t("epidemicCurve.suspectedFood.tooltip.pending"):t("epidemicCurve.suspectedFood.tooltip.noData");case"error":return t("epidemicCurve.suspectedFood.tooltip.error");default:return t("epidemicCurve.suspectedFood.tooltip.checking")}},f=(0,o.EW)(()=>{if(!u.value||!d.value)return{};const e=d.value.getBoundingClientRect(),t=e.left+e.width/2,a=e.bottom+5;return{left:`${t}px`,top:`${a}px`,transform:"translateX(-50%)",position:"fixed",zIndex:1e3}}),x=()=>{if(m.value){if(!n.value){const e=l.value||"",t=e.split(",").map(e=>e.trim()).filter(e=>e);r.value=new Set(t)}n.value=!n.value}},g=()=>{n.value=!1},y=e=>r.value.has(e),C=e=>{r.value.has(e)?r.value.delete(e):r.value.add(e),r.value=new Set(r.value)},w=()=>{const t=Array.from(r.value);l.value=t.join(", "),console.log("[useSuspectedFood] applySelectedFoods:",l.value),e.setSelectedSuspectedFoods(l.value),n.value=!1},k=()=>{e.setSelectedSuspectedFoods(l.value)};return{suspectedFood:l,isDropdownOpen:n,selectedFoods:r,showAnalysisTooltip:u,analysisTooltipRef:d,analysisResults:c,hasAnalysisResults:m,sortedFoodItems:p,backgroundAnalysisFoods:v,analysisStatus:b,analysisTooltipStyle:f,getAnalysisStatusTooltip:h,toggleDropdown:x,closeDropdown:g,isFoodSelected:y,toggleFoodSelection:C,applySelectedFoods:w,onSuspectedFoodChange:k}}var b=a(1263);const h={class:"mx-auto w-full max-w-4xl"},f={class:"flex flex-col gap-3"},x={class:"flex items-center gap-2 text-lg font-medium text-slate-800"},g={class:"relative inline-block"},y={class:"flex gap-3"},C={class:"flex-1 relative"},w=["placeholder","disabled"],k={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-xl shadow-xl z-[1000] max-h-[300px] overflow-y-auto"},S={class:"px-3 py-2.5 bg-slate-50 border-b border-slate-100 text-xs font-medium text-slate-500"},T=["onClick"],L=["checked","onChange"],E={class:"flex-1 text-sm text-slate-700"},R={key:0,class:"text-xs text-slate-500"},$={key:0,class:"text-blue-600 font-medium ml-1"},I={key:1,class:"text-blue-600 font-medium ml-1"},W={key:1,class:"text-xs text-slate-500"},M={key:2,class:"text-xs text-slate-500"},F={class:"flex gap-2 p-2.5 bg-slate-50 border-t border-slate-100 sticky bottom-0"};var D=(0,o.pM)({__name:"SuspectedFoodSelector",setup(e){const t=(0,i.KR)(null),{suspectedFood:a,isDropdownOpen:s,showAnalysisTooltip:n,analysisTooltipRef:r,hasAnalysisResults:u,sortedFoodItems:d,backgroundAnalysisFoods:c,analysisStatus:p,analysisTooltipStyle:D,getAnalysisStatusTooltip:_,toggleDropdown:z,closeDropdown:O,isFoodSelected:A,toggleFoodSelection:V,applySelectedFoods:X,onSuspectedFoodChange:B}=v(),N=e=>{s.value&&t.value&&!t.value.contains(e.target)&&X()};return(0,o.sV)(()=>{document.addEventListener("click",N)}),(0,o.hi)(()=>{document.removeEventListener("click",N)}),(e,v)=>((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",f,[(0,o.Lk)("div",x,[v[6]||(v[6]=(0,o.Lk)("span",{class:"w-1.5 h-1.5 rounded-full bg-slate-800"},null,-1)),(0,o.Lk)("span",null,(0,l.v_)(e.$t("epidemicCurve.suspectedFood.title")),1),(0,o.Lk)("div",g,[(0,i.R1)(p)?((0,o.uX)(),(0,o.CE)("span",{key:0,ref_key:"analysisTooltipRef",ref:r,class:(0,l.C4)(["px-2 py-0.5 rounded-full text-xs font-medium cursor-help whitespace-nowrap",{"bg-green-50 text-green-700 border border-green-200":"success"===(0,i.R1)(p).type,"bg-orange-50 text-orange-700 border border-orange-200":"warning"===(0,i.R1)(p).type,"bg-red-50 text-red-700 border border-red-200":"error"===(0,i.R1)(p).type}]),onMouseenter:v[0]||(v[0]=e=>n.value=!0),onMouseleave:v[1]||(v[1]=e=>n.value=!1)},(0,l.v_)((0,i.R1)(p).message),35)):(0,o.Q3)("",!0),(0,i.R1)(n)?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"fixed bg-slate-800 text-white px-3 py-2 rounded-lg text-xs whitespace-nowrap z-[1050] shadow-xl",style:(0,l.Tr)((0,i.R1)(D))},(0,l.v_)((0,i.R1)(_)((0,i.R1)(p))),5)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",C,[(0,o.Lk)("div",{ref_key:"dropdownRef",ref:t,class:"relative"},[(0,o.Lk)("div",{class:"flex items-center border border-slate-300 rounded-lg bg-white cursor-pointer hover:border-blue-400 transition-colors",onClick:v[4]||(v[4]=(...e)=>(0,i.R1)(z)&&(0,i.R1)(z)(...e))},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":v[2]||(v[2]=e=>(0,i.i9)(a)?a.value=e:null),type:"text",class:"flex-1 border-none py-2.5 px-3 text-sm outline-none bg-transparent cursor-pointer disabled:bg-slate-100 disabled:cursor-not-allowed",placeholder:e.$t("epidemicCurve.suspectedFood.placeholder"),onInput:v[3]||(v[3]=(...e)=>(0,i.R1)(B)&&(0,i.R1)(B)(...e)),disabled:!(0,i.R1)(u)},null,40,w),[[m.Jo,(0,i.R1)(a)]]),v[7]||(v[7]=(0,o.Lk)("span",{class:"px-3 text-slate-500 text-xs"},"▼",-1))]),(0,i.R1)(s)?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",S,[(0,o.Lk)("span",null,(0,l.v_)(e.$t("epidemicCurve.suspectedFood.multiSelectTitle")),1)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,i.R1)(c).length>0?(0,i.R1)(c):(0,i.R1)(d),e=>((0,o.uX)(),(0,o.CE)("div",{key:e.item,class:"flex items-center gap-2.5 px-3 py-2.5 cursor-pointer hover:bg-blue-50 transition-colors border-b border-slate-50 last:border-0",onClick:t=>(0,i.R1)(V)(e.item)},[(0,o.Lk)("input",{type:"checkbox",checked:(0,i.R1)(A)(e.item),onClick:v[5]||(v[5]=(0,m.D$)(()=>{},["stop"])),onChange:t=>(0,i.R1)(V)(e.item),class:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,L),(0,o.Lk)("span",E,(0,l.v_)(e.item),1),null!==e.pValue?((0,o.uX)(),(0,o.CE)("span",R,[(0,o.eW)(" p="+(0,l.v_)(e.pValue<.001?"<0.001":e.pValue.toFixed(3))+" ",1),e.oddsRatio&&"N/A"!==e.oddsRatio?((0,o.uX)(),(0,o.CE)("span",$," (OR: "+(0,l.v_)(e.oddsRatio)+") ",1)):e.relativeRisk&&"N/A"!==e.relativeRisk?((0,o.uX)(),(0,o.CE)("span",I," (RR: "+(0,l.v_)(e.relativeRisk)+") ",1)):(0,o.Q3)("",!0)])):e.oddsRatio&&"N/A"!==e.oddsRatio?((0,o.uX)(),(0,o.CE)("span",W," OR: "+(0,l.v_)(e.oddsRatio),1)):e.relativeRisk&&"N/A"!==e.relativeRisk?((0,o.uX)(),(0,o.CE)("span",M," RR: "+(0,l.v_)(e.relativeRisk),1)):(0,o.Q3)("",!0)],8,T))),128)),(0,o.Lk)("div",F,[(0,o.bF)(b.A,{onClick:(0,i.R1)(X),variant:"primary",size:"xs",class:"px-4 py-1.5 rounded-lg"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("common.close")),1)]),_:1},8,["onClick"]),(0,o.bF)(b.A,{onClick:(0,i.R1)(O),variant:"secondary",size:"xs",class:"px-4 py-1.5 rounded-lg border-slate-300"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("common.cancel")),1)]),_:1},8,["onClick"])])])):(0,o.Q3)("",!0)],512)])])])]))}});const _=D;var z=_,O=a(360),A=a(2032),V=a(2213);function X(){const e=(0,i.KR)(!1),t=(0,i.KR)(!1),a=(0,i.KR)(!1),o=(0,i.KR)(!1),l=async()=>{const t=document.getElementById("symptom-onset-table");if(!t)return console.warn("증상 테이블을 찾을 수 없습니다: #symptom-onset-table"),void(e.value=!1);try{const a=t.cloneNode(!0),o={borderCollapse:"collapse",border:"1px solid #888",fontSize:"14px",width:"100%"};Object.assign(a.style,o);const l={border:"1px solid #888",padding:"8px 4px",textAlign:"center"},i={...l,background:"#f2f2f2",fontWeight:"bold"};a.querySelectorAll("th").forEach(e=>Object.assign(e.style,i)),a.querySelectorAll("td").forEach(e=>Object.assign(e.style,l)),a.querySelectorAll("tbody tr").forEach(e=>{const t=e.querySelector("td");t&&(t.style.textAlign="left")});const s=a.outerHTML,n=t.innerText;navigator.clipboard&&window.ClipboardItem?await navigator.clipboard.write([new window.ClipboardItem({"text/html":new Blob([s],{type:"text/html"}),"text/plain":new Blob([n],{type:"text/plain"})})]):await navigator.clipboard.writeText(n),e.value=!0,setTimeout(()=>e.value=!1,1500)}catch(a){console.error("증상 테이블 복사 오류:",a),e.value=!1}},s=async()=>{const e=document.getElementById("incubation-table");if(!e)return console.warn("잠복기 테이블을 찾을 수 없습니다: #incubation-table"),void(t.value=!1);try{const a=e.cloneNode(!0),o={borderCollapse:"collapse",border:"1px solid #888",fontSize:"14px",width:"100%"};Object.assign(a.style,o);const l={border:"1px solid #888",padding:"8px 4px",textAlign:"center"},i={...l,background:"#f2f2f2",fontWeight:"bold"};a.querySelectorAll("th").forEach(e=>Object.assign(e.style,i)),a.querySelectorAll("td").forEach(e=>Object.assign(e.style,l)),a.querySelectorAll("tbody tr").forEach(e=>{const t=e.querySelector("td");t&&(t.style.textAlign="left")});const s=a.outerHTML,n=e.innerText;navigator.clipboard&&window.ClipboardItem?await navigator.clipboard.write([new window.ClipboardItem({"text/html":new Blob([s],{type:"text/html"}),"text/plain":new Blob([n],{type:"text/plain"})})]):await navigator.clipboard.writeText(n),t.value=!0,setTimeout(()=>t.value=!1,1500)}catch(a){console.error("잠복기 테이블 복사 오류:",a),t.value=!1}},n=async(e,t,a)=>{if(e&&"function"===typeof e.getDataURL)if(navigator.clipboard&&navigator.clipboard.write)if("undefined"!==typeof ClipboardItem)try{const o=document.createElement("div");o.style.width=`${t}px`,o.style.height="600px",o.style.position="absolute",o.style.left="-9999px",o.style.top="-9999px",document.body.appendChild(o);const l=A.Ts(o),i=e.getOption();i.animation=!1,l.setOption(i,!0),await new Promise(e=>setTimeout(e,100));const s=l.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!s||!s.startsWith("data:image/png"))throw new Error("유효하지 않은 이미지 데이터 URL");const n=await fetch(s),r=await n.blob();await navigator.clipboard.write([new ClipboardItem({[r.type]:r})]),l.dispose(),document.body.removeChild(o),a.value=!0,setTimeout(()=>a.value=!1,1500)}catch(o){console.error("차트 복사 오류:",o),a.value=!1}else a.value=!1;else a.value=!1;else a.value=!1},r=async(e,t)=>{await n(e,t,a)},u=async(e,t)=>{await n(e,t,o)},d=async(e,t,a)=>{if(e&&"function"===typeof e.getDataURL)try{const o=document.createElement("div");o.style.width=`${t}px`,o.style.height="600px",o.style.position="absolute",o.style.left="-9999px",o.style.top="-9999px",document.body.appendChild(o);const l=A.Ts(o),i=e.getOption();i.animation=!1,l.setOption(i,!0),await new Promise(e=>setTimeout(e,100));const s=l.getDataURL({type:"png",pixelRatio:3,backgroundColor:"#fff"});if(!s||!s.startsWith("data:image/png"))throw new Error("유효하지 않은 이미지 데이터 URL");const n=document.createElement("a");n.href=s,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),l.dispose(),document.body.removeChild(o),console.log("차트 저장 완료:",a)}catch(o){console.error("차트 내보내기 오류:",o),(0,V.P0)(`차트 내보내기 오류: ${o.message}`,"error")}else(0,V.P0)("차트 내보내기 불가","error")},c=async(e,t,a)=>{const o=`유행곡선_${a}시간_${(new Date).toISOString().split("T")[0]}.png`;await d(e,t,o)},p=async(e,t,a)=>{const o=`잠복기_${a}시간_${(new Date).toISOString().split("T")[0]}.png`;await d(e,t,o)};return{isSymptomTableCopied:e,isIncubationTableCopied:t,isEpiChartCopied:a,isIncubationChartCopied:o,copySymptomTableToClipboard:l,copyIncubationTableToClipboard:s,copyEpiChartToClipboard:r,copyIncubationChartToClipboard:u,exportEpiChart:c,exportIncubationChart:p}}const B={class:"flex flex-col flex-1"},N={class:"flex items-center justify-between mx-5 mt-5 mb-2.5"},K={class:"flex items-center text-[1.1em] text-[#333] font-medium text-left"},U={class:"ml-[0.2em]"},P={class:"relative group"},H={key:0,class:"absolute left-1/2 top-[110%] -translate-x-1/2 z-10 pointer-events-none flex items-center justify-center w-8 h-8 rounded-full shadow-sm bg-white border border-slate-100"},j={key:0,id:"symptom-onset-table",class:"w-[calc(100%-40px)] text-sm border-collapse mx-5 mb-5 border border-slate-200"},Q={class:"bg-slate-50 font-semibold p-2 border border-slate-200 text-slate-700"},Y={class:"bg-slate-50 font-semibold p-2 border border-slate-200 text-slate-700"},q={class:"p-2 border border-slate-200 text-center text-slate-600"},G={class:"p-2 border border-slate-200 text-center text-slate-600"},Z={key:1,class:"p-5 text-center text-[#666]"},J={class:"flex items-center text-[1.1em] text-[#333] font-medium text-left mx-5 mt-5"},ee={class:"ml-[0.2em]"},te={class:"mx-5 mb-5 mt-5 p-4 bg-[#f8f9fa] rounded-lg border border-slate-100"},ae={class:"flex items-center gap-2.5 mb-2 last:mb-0"},oe={class:"text-sm text-[#666] min-w-[100px]"},le={class:"text-sm text-[#333] font-medium"},ie={class:"flex items-center gap-2.5 mb-2 last:mb-0"},se={class:"text-sm text-[#666] min-w-[100px]"},ne={class:"text-sm text-[#333] font-medium"};var re=(0,o.pM)({__name:"SymptomOnsetTable",props:{tableData:{},firstOnsetTime:{default:"N/A"},lastOnsetTime:{default:"N/A"}},setup(e){const{isSymptomTableCopied:t,copySymptomTableToClipboard:a}=X(),s=t,n=()=>{a()};return(e,t)=>((0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("div",N,[(0,o.Lk)("div",K,[t[0]||(t[0]=(0,o.Lk)("span",{class:"inline-block w-[0.3em] h-[0.3em] bg-current mr-[0.3em] align-middle rounded-full"},null,-1)),(0,o.Lk)("span",U,(0,l.v_)(e.$t("epidemicCurve.symptomTable.title")),1)]),(0,o.Lk)("div",P,[(0,o.bF)(b.A,{onClick:n,variant:"secondary",size:"sm",icon:"content_copy"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("epidemicCurve.contextMenu.copy")||"Copy"),1)]),_:1}),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,o.k6)(()=>[(0,i.R1)(s)?((0,o.uX)(),(0,o.CE)("div",H,t[1]||(t[1]=[(0,o.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,o.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,o.Q3)("",!0)]),_:1})])]),e.tableData.length>0?((0,o.uX)(),(0,o.CE)("table",j,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",Q,(0,l.v_)(e.$t("epidemicCurve.symptomTable.time")),1),(0,o.Lk)("th",Y,(0,l.v_)(e.$t("epidemicCurve.symptomTable.count")),1)])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tableData,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:"onset-"+t,class:"hover:bg-slate-50/50"},[(0,o.Lk)("td",q,(0,l.v_)(e.intervalLabel),1),(0,o.Lk)("td",G,(0,l.v_)(e.count),1)]))),128))])])):((0,o.uX)(),(0,o.CE)("div",Z,[(0,o.bF)(O.A,{icon:"schedule",title:e.$t("epidemicCurve.symptomTable.guide.title"),description:e.$t("epidemicCurve.symptomTable.guide.desc"),steps:[{number:"1",text:e.$t("epidemicCurve.symptomTable.guide.step1")},{number:"2",text:e.$t("epidemicCurve.symptomTable.guide.step2")},{number:"3",text:e.$t("epidemicCurve.symptomTable.guide.step3")}]},null,8,["title","description","steps"])])),(0,o.Lk)("div",J,[t[2]||(t[2]=(0,o.Lk)("span",{class:"inline-block w-[0.3em] h-[0.3em] bg-current mr-[0.3em] align-middle rounded-full"},null,-1)),(0,o.Lk)("span",ee,(0,l.v_)(e.$t("epidemicCurve.symptomTable.summary.title")),1)]),(0,o.Lk)("div",te,[(0,o.Lk)("div",ae,[(0,o.Lk)("span",oe,(0,l.v_)(e.$t("epidemicCurve.symptomTable.summary.first")),1),(0,o.Lk)("span",le,(0,l.v_)(e.firstOnsetTime),1)]),(0,o.Lk)("div",ie,[(0,o.Lk)("span",se,(0,l.v_)(e.$t("epidemicCurve.symptomTable.summary.last")),1),(0,o.Lk)("span",ne,(0,l.v_)(e.lastOnsetTime),1)])])]))}});const ue=re;var de=ue;function ce(){const e=(0,i.KR)(null),t=(0,i.KR)(""),a=(a,o)=>{e.value=a,t.value=o},o=()=>{e.value=null};return{activeTooltip:e,tooltipText:t,showTooltip:a,hideTooltip:o}}const pe={class:"flex items-center gap-2"},me={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},ve={class:"relative group"},be={key:0,class:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var he=(0,o.pM)({__name:"ControlCycleText",props:{label:{default:""},modelValue:{},options:{},displayLabels:{default:()=>[]},tooltipPrefix:{default:"Change to"},suffix:{default:""},tooltipSuffix:{default:""},minWidthClass:{default:"min-w-[60px]"}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,s=t,n=(0,i.KR)(!1),r=(0,i.KR)(""),u=(0,i.KR)(null),d=(0,o.EW)(()=>a.options.map((e,t)=>{if("object"===typeof e&&null!==e&&"value"in e)return e;const o=a.displayLabels[t]||`${e}${a.suffix}`;return{value:e,label:o,tooltip:""}})),c=(0,o.EW)(()=>{const e=d.value.findIndex(e=>e.value===a.modelValue);return-1===e?0:e}),p=(0,o.EW)(()=>u.value?u.value:d.value[c.value]?.label||""),v=()=>{const e=(c.value+1)%d.value.length,t=d.value[e];if(s("update:modelValue",t.value),n.value){const t=(e+1)%d.value.length,o=d.value[t];u.value=o.label,o.tooltip?r.value=o.tooltip:r.value=`${a.tooltipPrefix} ${o.label}${a.tooltipSuffix}`}else u.value=null},b=()=>{const e=(c.value+1)%d.value.length,t=d.value[e];u.value=t.label,t.tooltip?r.value=t.tooltip:r.value=`${a.tooltipPrefix} ${t.label}${a.tooltipSuffix}`,n.value=!0},h=()=>{n.value=!1,u.value=null};return(0,o.wB)(()=>a.modelValue,()=>{n.value||(u.value=null)}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",pe,[e.label?((0,o.uX)(),(0,o.CE)("span",me,(0,l.v_)(e.label),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",ve,[(0,o.Lk)("button",{class:(0,l.C4)(["px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 shadow-sm hover:border-blue-400 hover:text-blue-600 transition-colors",e.minWidthClass]),onClick:v,onMouseenter:b,onMouseleave:h},(0,l.v_)(p.value),35),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,o.k6)(()=>[n.value?((0,o.uX)(),(0,o.CE)("div",be,[(0,o.eW)((0,l.v_)(r.value)+" ",1),t[0]||(t[0]=(0,o.Lk)("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:1})])]))}});const fe=he;var xe=fe;const ge={class:"flex items-center gap-2 ml-auto"},ye={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},Ce={class:"relative group"},we={key:0,class:"absolute bottom-full mb-2 right-0 left-auto translate-x-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50 origin-bottom-right"};var ke=(0,o.pM)({__name:"ControlCycleColor",props:{label:{default:""},modelValue:{},options:{},tooltip:{default:"Change color"}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,s=t,n=(0,i.KR)(!1),r=(0,i.KR)(""),u=()=>{const e=a.options.indexOf(a.modelValue),t=(e+1)%a.options.length;s("update:modelValue",a.options[t])},d=()=>{r.value=a.tooltip,n.value=!0},c=()=>{n.value=!1};return(e,t)=>((0,o.uX)(),(0,o.CE)("div",ge,[e.label?((0,o.uX)(),(0,o.CE)("span",ye,(0,l.v_)(e.label),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",Ce,[(0,o.Lk)("button",{class:"w-8 h-8 rounded-full border-2 border-white ring-1 ring-slate-200 hover:scale-110 transition-transform shadow-sm",style:(0,l.Tr)({backgroundColor:e.modelValue}),onClick:u,onMouseenter:d,onMouseleave:c},null,36),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,o.k6)(()=>[n.value?((0,o.uX)(),(0,o.CE)("div",we,[(0,o.eW)((0,l.v_)(r.value)+" ",1),t[0]||(t[0]=(0,o.Lk)("div",{class:"absolute top-full right-3 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:1})])]))}});const Se=ke;var Te=Se;const Le={class:"flex items-center gap-2"},Ee={key:0,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},Re=["onClick","onMouseenter"],$e={key:0,class:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Ie=(0,o.pM)({__name:"ControlGroup",props:{label:{default:""},modelValue:{},options:{}},emits:["update:modelValue"],setup(e){const t=(0,i.KR)(null);return(e,a)=>((0,o.uX)(),(0,o.CE)("div",Le,[e.label?((0,o.uX)(),(0,o.CE)("span",Ee,(0,l.v_)(e.label),1)):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.options,i=>((0,o.uX)(),(0,o.CE)("div",{key:i.value,class:"relative group"},[(0,o.Lk)("button",{onClick:t=>e.$emit("update:modelValue",i.value),class:(0,l.C4)(["px-3 py-1.5 rounded-lg text-sm font-medium border transition-all duration-200 shadow-sm",[e.modelValue===i.value?"bg-blue-600 text-white border-blue-600 ring-1 ring-blue-500":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-blue-600 hover:border-blue-300"]]),onMouseenter:e=>t.value=i.value,onMouseleave:a[0]||(a[0]=e=>t.value=null)},(0,l.v_)(i.label),43,Re),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,o.k6)(()=>[t.value===i.value&&i.tooltip?((0,o.uX)(),(0,o.CE)("div",$e,[(0,o.eW)((0,l.v_)(i.tooltip)+" ",1),a[1]||(a[1]=(0,o.Lk)("div",{class:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:2},1024)]))),128))]))}});const We=Ie;var Me=We;const Fe={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-50/80 rounded-xl border border-slate-200 shadow-sm backdrop-blur-sm w-full"},De={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},ze=["for"],Oe={class:"relative group"},Ae=["id","value"],Ve=["value"],Xe={key:0,class:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"},Be={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},Ke={class:"relative group"},Ue={key:0,class:"absolute top-full mt-2 right-0 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Pe=(0,o.pM)({__name:"EpidemicChartControls",props:{intervalLabel:{type:String,default:"시간 간격 :"},intervalId:{type:String,default:"interval-select"},intervalTooltipText:{type:String,default:"시간 간격을 변경합니다"},selectedInterval:{type:Number,required:!0},intervalOptions:{type:Array,default:()=>[{value:3,label:"3시간"},{value:6,label:"6시간"},{value:12,label:"12시간"},{value:24,label:"24시간"},{value:48,label:"48시간"}]},chartFontSize:{type:Number,default:16},chartWidth:{type:Number,default:700},barColor:{type:String,default:"#5470c6"},displayMode:{type:String,default:"time"},fontSizes:{type:Array,default:()=>[]},fontSizeLabels:{type:Array,default:()=>[]},chartWidths:{type:Array,default:()=>[]},barColors:{type:Array,default:()=>[]},displayModeOptions:{type:Array,default:()=>[]}},emits:["update:selectedInterval","update:chartFontSize","update:chartWidth","update:barColor","update:displayMode","resetSettings"],setup(e){const{t:t}=(0,n.s9)(),{activeTooltip:a,showTooltip:s,hideTooltip:r}=ce();return(t,n)=>((0,o.uX)(),(0,o.CE)("div",Fe,[(0,o.RG)(t.$slots,"prepend"),(0,o.Lk)("div",De,[(0,o.Lk)("div",_e,[(0,o.Lk)("label",{for:e.intervalId,class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},(0,l.v_)(e.intervalLabel),9,ze),(0,o.Lk)("div",Oe,[(0,o.Lk)("select",{id:e.intervalId,value:e.selectedInterval,onChange:n[0]||(n[0]=e=>t.$emit("update:selectedInterval",Number(e.target.value))),class:"px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 shadow-sm hover:border-blue-400 hover:text-blue-600 transition-colors outline-none focus:ring-2 focus:ring-blue-100",onMouseenter:n[1]||(n[1]=t=>(0,i.R1)(s)("interval",e.intervalTooltipText)),onMouseleave:n[2]||(n[2]=(...e)=>(0,i.R1)(r)&&(0,i.R1)(r)(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.intervalOptions,e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,l.v_)(e.label),9,Ve))),128))],40,Ae),(0,o.bF)(m.eB,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-[-4px]","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-[-4px]"},{default:(0,o.k6)(()=>["interval"===(0,i.R1)(a)?((0,o.uX)(),(0,o.CE)("div",Xe,[(0,o.eW)((0,l.v_)(e.intervalTooltipText)+" ",1),n[9]||(n[9]=(0,o.Lk)("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:1})])])]),n[11]||(n[11]=(0,o.Lk)("div",{class:"w-px h-6 bg-slate-300 mx-1"},null,-1)),(0,o.Lk)("div",Be,[(0,o.bF)(xe,{label:t.$t("epidemicCurve.controls.fontSize"),modelValue:e.chartFontSize,"onUpdate:modelValue":n[3]||(n[3]=e=>t.$emit("update:chartFontSize",e)),options:e.fontSizes,displayLabels:e.fontSizeLabels,tooltipPrefix:t.$t("epidemicCurve.controls.fontSizeTooltip"),suffix:"",minWidthClass:"min-w-[60px]"},null,8,["label","modelValue","options","displayLabels","tooltipPrefix"]),(0,o.bF)(xe,{label:t.$t("epidemicCurve.controls.chartWidth"),modelValue:e.chartWidth,"onUpdate:modelValue":n[4]||(n[4]=e=>t.$emit("update:chartWidth",e)),options:e.chartWidths,tooltipPrefix:t.$t("epidemicCurve.controls.chartWidthTooltip"),suffix:"px",tooltipSuffix:"",minWidthClass:"min-w-[70px]"},null,8,["label","modelValue","options","tooltipPrefix"])]),n[12]||(n[12]=(0,o.Lk)("div",{class:"w-px h-6 bg-slate-300 mx-1"},null,-1)),(0,o.Lk)("div",Ne,[(0,o.bF)(Me,{label:t.$t("epidemicCurve.controls.chartDisplay"),modelValue:e.displayMode,"onUpdate:modelValue":n[5]||(n[5]=e=>t.$emit("update:displayMode",e)),options:e.displayModeOptions},null,8,["label","modelValue","options"]),(0,o.bF)(Te,{label:t.$t("epidemicCurve.controls.color"),modelValue:e.barColor,"onUpdate:modelValue":n[6]||(n[6]=e=>t.$emit("update:barColor",e)),options:e.barColors,tooltip:t.$t("epidemicCurve.controls.colorTooltip")},null,8,["label","modelValue","options","tooltip"]),(0,o.RG)(t.$slots,"append")]),n[13]||(n[13]=(0,o.Lk)("div",{class:"ml-auto"},null,-1)),(0,o.Lk)("div",Ke,[(0,o.bF)(b.A,{onClick:n[7]||(n[7]=e=>t.$emit("resetSettings")),variant:"secondary",size:"sm",class:"text-slate-500 hover:text-slate-800 hover:border-slate-400",onMouseenter:n[8]||(n[8]=e=>(0,i.R1)(s)("reset",t.$t("common.chart.tooltip.reset"))),onMouseleave:(0,i.R1)(r)},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(t.$t("common.chart.reset")),1)]),_:1},8,["onMouseleave"]),(0,o.bF)(m.eB,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-[-4px]","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-[-4px]"},{default:(0,o.k6)(()=>["reset"===(0,i.R1)(a)?((0,o.uX)(),(0,o.CE)("div",Ue,[(0,o.eW)((0,l.v_)(t.$t("common.chart.tooltip.reset"))+" ",1),n[10]||(n[10]=(0,o.Lk)("div",{class:"absolute bottom-full right-3 border-4 border-transparent border-b-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:1})])]))}});const He=Pe;var je=He;const Qe={key:0,class:"flex items-center gap-2"},Ye={class:"text-xs font-semibold text-slate-500 uppercase tracking-wider"},qe={class:"relative group"},Ge={key:0,class:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Ze=(0,o.pM)({__name:"EpiCurveControls",props:{selectedInterval:{},chartFontSize:{},chartWidth:{},barColor:{},displayMode:{},fontSizes:{default:()=>[]},fontSizeLabels:{default:()=>[]},chartWidths:{default:()=>[]},barColors:{default:()=>[]},showConfirmedCaseToggle:{type:Boolean,default:!1},showConfirmedCaseLine:{type:Boolean,default:!0}},emits:["update:selectedInterval","update:chartFontSize","update:chartWidth","update:barColor","update:displayMode","toggleConfirmedCaseLine","resetSettings"],setup(e){const{t:t}=(0,n.s9)(),{activeTooltip:a,tooltipText:s,showTooltip:r,hideTooltip:u}=ce(),d=(0,o.EW)(()=>[{value:"time",label:t("epidemicCurve.displayMode.hour"),tooltip:t("epidemicCurve.displayMode.hourTooltip")},{value:"datetime",label:t("epidemicCurve.displayMode.datetime"),tooltip:t("epidemicCurve.displayMode.datetimeTooltip")}]),c=(0,o.EW)(()=>[{value:3,label:`3${t("dataInput.datetime.hour")}`},{value:6,label:`6${t("dataInput.datetime.hour")}`},{value:12,label:`12${t("dataInput.datetime.hour")}`},{value:24,label:`24${t("dataInput.datetime.hour")}`},{value:48,label:`48${t("dataInput.datetime.hour")}`}]);return(e,t)=>((0,o.uX)(),(0,o.Wv)(je,{intervalLabel:e.$t("epidemicCurve.controls.intervalLabel"),intervalId:"symptom-interval",intervalTooltipText:e.$t("epidemicCurve.controls.intervalTooltip"),selectedInterval:e.selectedInterval,intervalOptions:c.value,"onUpdate:selectedInterval":t[2]||(t[2]=t=>e.$emit("update:selectedInterval",t)),chartFontSize:e.chartFontSize,"onUpdate:chartFontSize":t[3]||(t[3]=t=>e.$emit("update:chartFontSize",t)),chartWidth:e.chartWidth,"onUpdate:chartWidth":t[4]||(t[4]=t=>e.$emit("update:chartWidth",t)),barColor:e.barColor,"onUpdate:barColor":t[5]||(t[5]=t=>e.$emit("update:barColor",t)),displayMode:e.displayMode,"onUpdate:displayMode":t[6]||(t[6]=t=>e.$emit("update:displayMode",t)),displayModeOptions:d.value,fontSizes:e.fontSizes,fontSizeLabels:e.fontSizeLabels,chartWidths:e.chartWidths,barColors:e.barColors,onResetSettings:t[7]||(t[7]=t=>e.$emit("resetSettings"))},{append:(0,o.k6)(()=>[e.showConfirmedCaseToggle?((0,o.uX)(),(0,o.CE)("div",Qe,[(0,o.Lk)("label",Ye,(0,l.v_)(e.$t("epidemicCurve.controls.confirmedLine")),1),(0,o.Lk)("div",qe,[(0,o.bF)(b.A,{onClick:t[0]||(t[0]=t=>e.$emit("toggleConfirmedCaseLine")),variant:e.showConfirmedCaseLine?"primary":"secondary",size:"sm",onMouseenter:t[1]||(t[1]=t=>(0,i.R1)(r)("confirmedCaseLine",e.$t("epidemicCurve.controls.confirmedTooltip"))),onMouseleave:(0,i.R1)(u)},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.showConfirmedCaseLine?e.$t("epidemicCurve.controls.show"):e.$t("epidemicCurve.controls.hide")),1)]),_:1},8,["variant","onMouseleave"]),"confirmedCaseLine"===(0,i.R1)(a)?((0,o.uX)(),(0,o.CE)("div",Ge,[(0,o.eW)((0,l.v_)((0,i.R1)(s))+" ",1),t[8]||(t[8]=(0,o.Lk)("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-slate-800"},null,-1))])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)]),_:1},8,["intervalLabel","intervalTooltipText","selectedInterval","intervalOptions","chartFontSize","chartWidth","barColor","displayMode","displayModeOptions","fontSizes","fontSizeLabels","chartWidths","barColors"]))}});const Je=Ze;var et=Je,tt=a(923);const at={class:"flex justify-end gap-2 mb-2 w-full"},ot={class:"relative"},lt={key:0,class:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-[100]"},it={key:0,class:"absolute left-1/2 top-[115%] -translate-x-1/2 z-[100] pointer-events-none flex items-center justify-center w-8 h-8 rounded-full shadow-lg bg-white border border-slate-100"},st={class:"relative"},nt={key:0,class:"absolute left-1/2 top-[115%] -translate-x-1/2 z-[100] pointer-events-none flex items-center justify-center w-8 h-8 rounded-full shadow-lg bg-white border border-slate-100"},rt={class:"relative"};var ut=(0,o.pM)({__name:"ChartActionButtons",props:{isSaved:{type:Boolean,default:!1},showSavedFeedback:{type:Boolean,default:!1},isCopied:{type:Boolean,default:!1}},emits:["saveReport","copyChart","exportChart"],setup(e){const t=(0,i.KR)(null),a=e=>{t.value=e},s=()=>{t.value=null};return(e,i)=>((0,o.uX)(),(0,o.CE)("div",at,[(0,o.Lk)("div",ot,[(0,o.bF)(b.A,{variant:e.isSaved?"success":"secondary",icon:"save_alt",onClick:i[0]||(i[0]=t=>e.$emit("saveReport")),onMouseenter:i[1]||(i[1]=e=>a("saveReport")),onMouseleave:s,class:"min-w-[120px]"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.isSaved?e.$t("common.chart.saved"):e.$t("common.chart.saveReport")),1)]),_:1},8,["variant"]),(0,o.bF)(m.eB,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-[-4px]","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-[-4px]"},{default:(0,o.k6)(()=>["saveReport"===t.value?((0,o.uX)(),(0,o.CE)("div",lt,[(0,o.eW)((0,l.v_)(e.$t("common.chart.tooltip.saveReport"))+" ",1),i[4]||(i[4]=(0,o.Lk)("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-slate-800"},null,-1))])):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"opacity-0 translate-y-2 scale-90","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-2 scale-90"},{default:(0,o.k6)(()=>[e.showSavedFeedback?((0,o.uX)(),(0,o.CE)("div",it,i[5]||(i[5]=[(0,o.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24"},[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,o.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,o.Q3)("",!0)]),_:1})]),(0,o.Lk)("div",st,[(0,o.bF)(b.A,{variant:"secondary",icon:"content_copy",onClick:i[2]||(i[2]=t=>e.$emit("copyChart"))},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("common.chart.copy")),1)]),_:1}),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-300 transform","enter-from-class":"opacity-0 translate-y-2 scale-90","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition ease-in duration-200 transform","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-2 scale-90"},{default:(0,o.k6)(()=>[e.isCopied?((0,o.uX)(),(0,o.CE)("div",nt,i[6]||(i[6]=[(0,o.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 24 24"},[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,o.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,o.Q3)("",!0)]),_:1})]),(0,o.Lk)("div",rt,[(0,o.bF)(b.A,{variant:"secondary",icon:"download",onClick:i[3]||(i[3]=t=>e.$emit("exportChart"))},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("common.chart.save")),1)]),_:1})])]))}});const dt=ut;var ct=dt;const pt={class:"chart-container-wrapper epi-chart-wrapper"};var mt=(0,o.pM)({__name:"EpiCurveChart",props:{chartOptions:{},chartWidth:{},chartHeight:{default:550},isChartSaved:{type:Boolean,default:!1},showChartSavedTooltip:{type:Boolean,default:!1}},emits:["saveChartForReport","copyChart","exportChart","chartInstance"],setup(e,{expose:t,emit:a}){const s=e,n=a,r=(0,i.KR)(null),u=(0,i.KR)(null),d=(0,i.KR)(!1),c=()=>{if(!r.value)return;const e=r.value.getBoundingClientRect();e.width<=0||(u.value&&u.value.dispose(),u.value=(0,i.IG)(A.Ts(r.value)),n("chartInstance",u.value),s.chartOptions&&"object"===typeof s.chartOptions&&u.value.setOption(s.chartOptions,!0))},p=()=>{u.value?s.chartOptions&&"object"===typeof s.chartOptions&&u.value.setOption(s.chartOptions,!0):c()},m=(0,tt.A)(p,200);(0,o.wB)(()=>s.chartOptions,()=>{(0,o.dY)(m)},{deep:!0}),(0,o.wB)(()=>s.chartWidth,(e,t)=>{e!==t&&u.value&&(u.value.dispose(),u.value=null,(0,o.dY)(()=>{setTimeout(()=>{c()},50)}))},{flush:"post"}),(0,o.sV)(()=>{(0,o.dY)(c)}),(0,o.hi)(()=>{u.value&&(u.value.dispose(),u.value=null),m.cancel&&m.cancel()});const v=async()=>{u.value&&(n("copyChart",u.value),d.value=!0,setTimeout(()=>d.value=!1,1500))},b=()=>{u.value&&n("exportChart",u.value)};return t({chartInstance:u,initChart:c,updateChart:p}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.bF)(ct,{isSaved:e.isChartSaved,showSavedFeedback:e.showChartSavedTooltip,isCopied:d.value,onSaveReport:t[0]||(t[0]=t=>e.$emit("saveChartForReport")),onCopyChart:v,onExportChart:b},null,8,["isSaved","showSavedFeedback","isCopied"]),(0,o.Lk)("div",{ref_key:"chartContainer",ref:r,class:"chart-instance",style:(0,l.Tr)({width:e.chartWidth+"px",height:e.chartHeight+"px"})},null,4)]))}}),vt=a(1241);const bt=(0,vt.A)(mt,[["__scopeId","data-v-62caa894"]]);var ht=bt;const ft={key:0,class:"mt-4 mb-2 mx-auto w-full max-w-4xl"},xt={class:"flex flex-col gap-3"},gt={class:"flex items-center gap-2 text-lg font-medium text-slate-800"},yt={class:"flex gap-3"},Ct={class:"relative w-full max-w-[280px]"},wt={class:"relative group"},kt=["value","placeholder"],St={key:0,class:"absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-3 py-2 rounded shadow-lg text-xs whitespace-nowrap z-50"};var Tt=(0,o.pM)({__name:"ExposureTimeControl",props:{formattedExposureDateTime:{},isIndividualExposureColumnVisible:{type:Boolean}},emits:["showExposureDateTimePicker"],setup(e){const{activeTooltip:t,tooltipText:a,showTooltip:s,hideTooltip:n}=ce();return(e,r)=>e.isIndividualExposureColumnVisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ft,[(0,o.Lk)("div",xt,[(0,o.Lk)("div",gt,[r[3]||(r[3]=(0,o.Lk)("span",{class:"w-1.5 h-1.5 rounded-full bg-slate-800"},null,-1)),(0,o.Lk)("span",null,(0,l.v_)(e.$t("epidemicCurve.exposure.title")),1)]),(0,o.Lk)("div",yt,[(0,o.Lk)("div",Ct,[(0,o.Lk)("div",wt,[(0,o.Lk)("div",{class:"flex items-center border border-slate-300 rounded-lg bg-white cursor-pointer hover:border-blue-400 transition-colors",onClick:r[0]||(r[0]=t=>e.$emit("showExposureDateTimePicker",t)),onMouseenter:r[1]||(r[1]=t=>(0,i.R1)(s)("exposureTime",e.$t("epidemicCurve.exposure.tooltip"))),onMouseleave:r[2]||(r[2]=(...e)=>(0,i.R1)(n)&&(0,i.R1)(n)(...e))},[(0,o.Lk)("input",{type:"text",id:"exposure-time",value:e.formattedExposureDateTime,readonly:"",class:"flex-1 border-none py-2.5 px-3 text-sm outline-none bg-transparent cursor-pointer disabled:bg-slate-100 disabled:cursor-not-allowed text-slate-700",placeholder:e.$t("epidemicCurve.exposure.placeholder")},null,8,kt),r[4]||(r[4]=(0,o.Lk)("span",{class:"px-3 text-slate-500 material-icons text-[20px]"},"event",-1))],32),"exposureTime"===(0,i.R1)(t)?((0,o.uX)(),(0,o.CE)("div",St,[(0,o.eW)((0,l.v_)((0,i.R1)(a))+" ",1),r[5]||(r[5]=(0,o.Lk)("div",{class:"absolute bottom-full left-1/2 -translate-x-1/2 border-4 border-transparent border-b-slate-800"},null,-1))])):(0,o.Q3)("",!0)])])])])]))}});const Lt=Tt;var Et=Lt;const Rt={class:"flex flex-col flex-1"},$t={class:"flex items-center justify-between mx-5 mt-5 mb-2.5"},It={class:"flex items-center text-[1.1em] text-[#333] font-medium text-left"},Wt={class:"ml-[0.2em]"},Mt={class:"relative group"},Ft={key:0,class:"absolute left-1/2 top-[110%] -translate-x-1/2 z-10 pointer-events-none flex items-center justify-center w-8 h-8 rounded-full shadow-sm bg-white border border-slate-100"},Dt={key:0,id:"incubation-table",class:"w-[calc(100%-40px)] text-sm border-collapse mx-5 mb-5 border border-slate-200"},_t={class:"bg-slate-50 font-semibold p-2 border border-slate-200 text-slate-700"},zt={class:"bg-slate-50 font-semibold p-2 border border-slate-200 text-slate-700"},Ot={class:"p-2 border border-slate-200 text-center text-slate-600"},At={class:"p-2 border border-slate-200 text-center text-slate-600"},Vt={key:1,class:"p-5 text-center text-[#666]"},Xt={class:"flex items-center text-[1.1em] text-[#333] font-medium text-left mx-5 mt-5"},Bt={class:"ml-[0.2em]"},Nt={class:"mx-5 mb-5 mt-5 p-4 bg-[#f8f9fa] rounded-lg border border-slate-100 grid grid-cols-2 gap-x-4 gap-y-2"},Kt={class:"flex items-center gap-2.5 mb-2 last:mb-0"},Ut={class:"text-sm text-[#666] min-w-[100px]"},Pt={class:"text-sm text-[#333] font-medium"},Ht={class:"flex items-center gap-2.5 mb-2 last:mb-0"},jt={class:"text-sm text-[#666] min-w-[100px]"},Qt={class:"text-sm text-[#333] font-medium"},Yt={class:"flex items-center gap-2.5 mb-2 last:mb-0"},qt={class:"text-sm text-[#666] min-w-[100px]"},Gt={class:"text-sm text-[#333] font-medium"},Zt={class:"flex items-center gap-2.5"},Jt={class:"text-sm text-[#666] min-w-[100px]"},ea={class:"text-sm text-[#333] font-medium"};var ta=(0,o.pM)({__name:"IncubationTable",props:{tableData:{},minIncubation:{default:"--:--"},maxIncubation:{default:"--:--"},avgIncubation:{default:"--:--"},medianIncubation:{default:"--:--"},hasExposureDateTime:{type:Boolean,default:!1},isIndividualExposureColumnVisible:{type:Boolean,default:!1}},setup(e){const{t:t}=(0,n.s9)(),a=(0,o.EW)(()=>[{number:"1",text:t("epidemicCurve.incubationTable.guide.step1")},{number:"2",text:t("epidemicCurve.incubationTable.guide.step2")},{number:"3",text:t("epidemicCurve.incubationTable.guide.step3")}]),{isIncubationTableCopied:s,copyIncubationTableToClipboard:r}=((0,o.EW)(()=>[{number:"1",text:"Symptom Onset"},{number:"2",text:"Min 2 Patients"},{number:"3",text:"Format: YYYY-MM-DD HH:MM"}]),X()),u=s,d=()=>{r()};return(e,t)=>((0,o.uX)(),(0,o.CE)("div",Rt,[(0,o.Lk)("div",$t,[(0,o.Lk)("div",It,[t[0]||(t[0]=(0,o.Lk)("span",{class:"inline-block w-[0.3em] h-[0.3em] bg-current mr-[0.3em] align-middle rounded-full"},null,-1)),(0,o.Lk)("span",Wt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.title")),1)]),(0,o.Lk)("div",Mt,[(0,o.bF)(b.A,{onClick:d,variant:"secondary",size:"sm",icon:"content_copy"},{default:(0,o.k6)(()=>[(0,o.eW)((0,l.v_)(e.$t("common.copy")),1)]),_:1}),(0,o.bF)(m.eB,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:(0,o.k6)(()=>[(0,i.R1)(u)?((0,o.uX)(),(0,o.CE)("div",Ft,t[1]||(t[1]=[(0,o.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"12",fill:"#1a73e8"}),(0,o.Lk)("polyline",{points:"7,13 11,17 17,9",fill:"none",stroke:"#fff","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(0,o.Q3)("",!0)]),_:1})])]),e.tableData.length>0?((0,o.uX)(),(0,o.CE)("table",Dt,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",_t,(0,l.v_)(e.$t("epidemicCurve.incubationTable.interval")),1),(0,o.Lk)("th",zt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.count")),1)])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.tableData,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:"incubation-"+t,class:"hover:bg-slate-50/50"},[(0,o.Lk)("td",Ot,(0,l.v_)(e.intervalLabel),1),(0,o.Lk)("td",At,(0,l.v_)(e.count),1)]))),128))])])):((0,o.uX)(),(0,o.CE)("div",Vt,[e.hasExposureDateTime||e.isIndividualExposureColumnVisible?((0,o.uX)(),(0,o.Wv)(O.A,{key:1,icon:"timer",title:e.$t("epidemicCurve.incubationTable.guide.title"),description:e.$t("epidemicCurve.incubationTable.guide.desc"),steps:[{number:"1",text:e.$t("epidemicCurve.incubationTable.guide.step1")},{number:"2",text:e.$t("epidemicCurve.incubationTable.guide.step2")},{number:"3",text:e.$t("epidemicCurve.incubationTable.guide.step3")}]},null,8,["title","description","steps"])):((0,o.uX)(),(0,o.Wv)(O.A,{key:0,icon:"event",title:e.$t("epidemicCurve.incubationTable.guide.noExposureTitle"),description:e.$t("epidemicCurve.incubationTable.guide.noExposureDesc"),steps:a.value},null,8,["title","description","steps"]))])),(0,o.Lk)("div",Xt,[t[2]||(t[2]=(0,o.Lk)("span",{class:"inline-block w-[0.3em] h-[0.3em] bg-current mr-[0.3em] align-middle rounded-full"},null,-1)),(0,o.Lk)("span",Bt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.summary.title")),1)]),(0,o.Lk)("div",Nt,[(0,o.Lk)("div",Kt,[(0,o.Lk)("span",Ut,(0,l.v_)(e.$t("epidemicCurve.incubationTable.summary.min")),1),(0,o.Lk)("span",Pt,(0,l.v_)(e.minIncubation),1)]),(0,o.Lk)("div",Ht,[(0,o.Lk)("span",jt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.summary.max")),1),(0,o.Lk)("span",Qt,(0,l.v_)(e.maxIncubation),1)]),(0,o.Lk)("div",Yt,[(0,o.Lk)("span",qt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.summary.avg")),1),(0,o.Lk)("span",Gt,(0,l.v_)(e.avgIncubation),1)]),(0,o.Lk)("div",Zt,[(0,o.Lk)("span",Jt,(0,l.v_)(e.$t("epidemicCurve.incubationTable.summary.median")),1),(0,o.Lk)("span",ea,(0,l.v_)(e.medianIncubation),1)])])]))}});const aa=ta;var oa=aa,la=(0,o.pM)({__name:"IncubationControls",props:{selectedInterval:{},chartFontSize:{},chartWidth:{},barColor:{},displayMode:{},fontSizes:{default:()=>[]},fontSizeLabels:{default:()=>[]},chartWidths:{default:()=>[]},barColors:{default:()=>[]},formattedExposureDateTime:{default:""},isIndividualExposureColumnVisible:{type:Boolean,default:!1}},emits:["update:selectedInterval","update:chartFontSize","update:chartWidth","update:barColor","update:displayMode","resetSettings","showExposureDateTimePicker"],setup(e){const{t:t}=(0,n.s9)(),{activeTooltip:a,tooltipText:l,showTooltip:i,hideTooltip:s}=ce(),r=(0,o.EW)(()=>[{value:3,label:`3${t("dataInput.datetime.hour")}`},{value:6,label:`6${t("dataInput.datetime.hour")}`},{value:12,label:`12${t("dataInput.datetime.hour")}`},{value:24,label:`24${t("dataInput.datetime.hour")}`},{value:48,label:`48${t("dataInput.datetime.hour")}`}]),u=(0,o.EW)(()=>[{value:"hour",label:t("epidemicCurve.displayMode.incubationHour"),tooltip:t("epidemicCurve.displayMode.incubationHourTooltip")},{value:"hhmm",label:t("epidemicCurve.displayMode.incubationHHMM"),tooltip:t("epidemicCurve.displayMode.incubationHHMMTooltip")}]);return(e,t)=>((0,o.uX)(),(0,o.Wv)(je,{intervalLabel:e.$t("epidemicCurve.incubationControls.intervalLabel"),intervalId:"incubation-interval",intervalTooltipText:e.$t("epidemicCurve.incubationControls.intervalTooltip"),selectedInterval:e.selectedInterval,intervalOptions:r.value,"onUpdate:selectedInterval":t[0]||(t[0]=t=>e.$emit("update:selectedInterval",t)),chartFontSize:e.chartFontSize,"onUpdate:chartFontSize":t[1]||(t[1]=t=>e.$emit("update:chartFontSize",t)),chartWidth:e.chartWidth,"onUpdate:chartWidth":t[2]||(t[2]=t=>e.$emit("update:chartWidth",t)),barColor:e.barColor,"onUpdate:barColor":t[3]||(t[3]=t=>e.$emit("update:barColor",t)),displayMode:e.displayMode,"onUpdate:displayMode":t[4]||(t[4]=t=>e.$emit("update:displayMode",t)),displayModeOptions:u.value,fontSizes:e.fontSizes,fontSizeLabels:e.fontSizeLabels,chartWidths:e.chartWidths,barColors:e.barColors,onResetSettings:t[5]||(t[5]=t=>e.$emit("resetSettings"))},null,8,["intervalLabel","intervalTooltipText","selectedInterval","intervalOptions","chartFontSize","chartWidth","barColor","displayMode","displayModeOptions","fontSizes","fontSizeLabels","chartWidths","barColors"]))}});const ia=la;var sa=ia;const na={class:"chart-container-wrapper incubation-chart-wrapper"},ra={key:0,class:"no-data-message"},ua={key:1,class:"no-data-message"};var da=(0,o.pM)({__name:"IncubationChart",props:{chartOptions:{},chartWidth:{},chartHeight:{default:550},isChartSaved:{type:Boolean,default:!1},showChartSavedTooltip:{type:Boolean,default:!1},showWarningMessage:{type:Boolean,default:!1},formattedExposureDateTime:{default:""}},emits:["saveChartForReport","copyChart","exportChart","chartInstance"],setup(e,{expose:t,emit:a}){const s=e,n=a,r=(0,i.KR)(null),u=(0,i.KR)(null),d=(0,i.KR)(!1),c=()=>{if(!r.value||s.showWarningMessage)return;const e=r.value.getBoundingClientRect();e.width<=0||(u.value&&u.value.dispose(),u.value=(0,i.IG)(A.Ts(r.value)),n("chartInstance",u.value),s.chartOptions&&"object"===typeof s.chartOptions&&u.value.setOption(s.chartOptions,!1))},p=()=>{s.showWarningMessage||(u.value?s.chartOptions&&"object"===typeof s.chartOptions&&u.value.setOption(s.chartOptions,!1):c())},m=(0,tt.A)(p,200);(0,o.wB)(()=>s.chartOptions,()=>{(0,o.dY)(m)},{deep:!0}),(0,o.wB)(()=>s.chartWidth,(e,t)=>{e!==t&&u.value&&(u.value.dispose(),u.value=null,(0,o.dY)(()=>{setTimeout(()=>{c()},50)}))},{flush:"post"}),(0,o.wB)(()=>s.showWarningMessage,(e,t)=>{!e&&t&&(0,o.dY)(()=>{setTimeout(c,50)})}),(0,o.sV)(()=>{(0,o.dY)(c)}),(0,o.hi)(()=>{u.value&&(u.value.dispose(),u.value=null),m.cancel&&m.cancel()});const v=async()=>{u.value&&(n("copyChart",u.value),d.value=!0,setTimeout(()=>d.value=!1,1500))},b=()=>{u.value&&n("exportChart",u.value)};return t({chartInstance:u,initChart:c,updateChart:p}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",na,[(0,o.bF)(ct,{isSaved:e.isChartSaved,showSavedFeedback:e.showChartSavedTooltip,isCopied:d.value,onSaveReport:t[0]||(t[0]=t=>e.$emit("saveChartForReport")),onCopyChart:v,onExportChart:b},null,8,["isSaved","showSavedFeedback","isCopied"]),e.formattedExposureDateTime?e.showWarningMessage?((0,o.uX)(),(0,o.CE)("div",ua,[(0,o.bF)(O.A,{icon:"warning",title:e.$t("epidemicCurve.warning.title"),description:e.$t("epidemicCurve.warning.desc"),steps:[{number:"1",text:e.$t("epidemicCurve.warning.step1",{time:e.formattedExposureDateTime})},{number:"2",text:e.$t("epidemicCurve.warning.step2")}]},null,8,["title","description","steps"])])):((0,o.uX)(),(0,o.CE)("div",{key:2,ref_key:"chartContainer",ref:r,class:"chart-instance",style:(0,l.Tr)({width:e.chartWidth+"px",height:e.chartHeight+"px"})},null,4)):((0,o.uX)(),(0,o.CE)("div",ra,[(0,o.bF)(O.A,{icon:"event",title:e.$t("epidemicCurve.incubationTable.guide.noExposureTitle"),description:e.$t("epidemicCurve.incubationTable.guide.noExposureDesc"),steps:[{number:"1",text:e.$t("epidemicCurve.incubationTable.guide.step1")},{number:"2",text:e.$t("epidemicCurve.incubationTable.guide.step2")},{number:"3",text:e.$t("epidemicCurve.incubationTable.guide.step3")}]},null,8,["title","description","steps"])]))]))}});const ca=(0,vt.A)(da,[["__scopeId","data-v-2fdc62e8"]]);var pa=ca,ma=a(1215),va=a(4956),ba=a(1335);function ha(e){if(!e||"string"!==typeof e)return null;try{const t=e.includes("T")?e:e.replace(" ","T"),a=new Date(t);return isNaN(a.getTime())?null:a}catch{return null}}const fa=1e4;function xa({onsetTimes:e,intervalHours:t,firstOnsetTime:a,lastOnsetTime:o,floorToIntervalStart:l,formatDateTime:i,formatDateTimeEnd:s}){if(!t||!e||0===e.length||!a||!o)return[];const n=36e5*t,r=a.getTime(),u=o.getTime(),d=1,c=1,p=l(r,t);if(isNaN(p))return[];let m=p;while(m>r)m-=n;r>=m+n&&(m+=n);const v=m-d*n,b=u+c*n,h=[];let f=v,x=0;while(f<=b&&x<fa){const t=f+n;let a=0;for(const l of e){const e=l.getTime();e>=f&&e<t&&a++}const o=new Date(t-6e4);h.push({intervalLabel:`${i(new Date(f))} ~ ${s(o)}`,count:a}),f=t,x++}return h}function ga(){const e=(0,ba.X)(),t=(0,s.C)(),a=(0,o.EW)(()=>e.rows||[]),l=(0,o.EW)(()=>t.isIndividualExposureColumnVisible),i=(0,o.EW)(()=>t.isConfirmedCaseColumnVisible),n=(0,o.EW)({get:()=>t.exposureDateTime,set:e=>t.updateExposureDateTime(e)}),r=(0,o.EW)({get:()=>t.selectedSymptomInterval,set:e=>t.updateSymptomInterval(e)}),u=e=>{if(!e||!(e instanceof Date)||isNaN(e.getTime()))return"";const t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0");return`${t}-${a} ${o}:${l}`},d=e=>{if(!e||!(e instanceof Date)||isNaN(e.getTime()))return"";const t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0");return`${t}-${a} ${o}:59`},c=e=>{if(!e||!(e instanceof Date)||isNaN(e.getTime()))return"N/A";const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${o} ${l}:${i}`},p=(e,t)=>{if(isNaN(e)||isNaN(t)||t<=0)return NaN;const a=new Date(e);if(isNaN(a.getTime()))return NaN;const o=a.getHours(),l=Math.floor(o/t)*t,i=new Date(a.getFullYear(),a.getMonth(),a.getDate(),l,0,0,0);return i.getTime()},m=(e,t=!1)=>{if("1"!==e.isPatient||!e.symptomOnset)return!1;if(t&&"1"!==e.isConfirmedCase)return!1;const a=ha(e.symptomOnset);if(!a)return!1;if(l.value){if(e.individualExposureTime){const t=ha(e.individualExposureTime);if(t&&a<t)return!1}}else if(n.value){const e=ha(n.value);if(e&&a<e)return!1}return!0},v=(0,o.EW)(()=>a.value&&0!==a.value.length?a.value.filter(e=>m(e,!1)).map(e=>ha(e.symptomOnset)).filter(e=>null!==e).sort((e,t)=>e.getTime()-t.getTime()):[]),b=(0,o.EW)(()=>a.value&&0!==a.value.length?a.value.filter(e=>m(e,!0)).map(e=>ha(e.symptomOnset)).filter(e=>null!==e).sort((e,t)=>e.getTime()-t.getTime()):[]),h=(0,o.EW)(()=>v.value.length>0?v.value[0]:null),f=(0,o.EW)(()=>v.value.length>0?v.value[v.value.length-1]:null),x=(0,o.EW)(()=>c(h.value)),g=(0,o.EW)(()=>c(f.value)),y=(0,o.EW)(()=>h.value&&f.value?xa({onsetTimes:v.value,intervalHours:r.value,firstOnsetTime:h.value,lastOnsetTime:f.value,floorToIntervalStart:p,formatDateTime:u,formatDateTimeEnd:d}):[]),C=(0,o.EW)(()=>h.value&&f.value?xa({onsetTimes:b.value,intervalHours:r.value,firstOnsetTime:h.value,lastOnsetTime:f.value,floorToIntervalStart:p,formatDateTime:u,formatDateTimeEnd:d}):[]),w=(0,o.EW)(()=>Array.isArray(a.value)&&a.value.length>0),k=(0,o.EW)(()=>!!w.value&&a.value.some(e=>"1"===e.isPatient&&e.symptomOnset));return{rows:a,isIndividualExposureColumnVisible:l,isConfirmedCaseColumnVisible:i,exposureDateTime:n,selectedSymptomInterval:r,patientOnsetTimes:v,confirmedCaseOnsetTimes:b,firstOnsetTime:h,lastOnsetTime:f,formattedFirstOnsetTime:x,formattedLastOnsetTime:g,symptomOnsetTableData:y,confirmedCaseOnsetTableData:C,hasValidData:w,hasValidPatientData:k,formatDateTime:u,formatDateTimeEnd:d,formatShortDateTime:c,floorToIntervalStart:p}}function ya(){const e=(0,ba.X)(),t=(0,s.C)(),a=(0,o.EW)(()=>e.rows||[]),l=(0,o.EW)(()=>t.isIndividualExposureColumnVisible),i=(0,o.EW)({get:()=>t.exposureDateTime,set:e=>t.updateExposureDateTime(e)}),n=(0,o.EW)({get:()=>t.selectedIncubationInterval,set:e=>t.updateIncubationInterval(e)}),r=e=>{if(isNaN(e)||e<0)return"--:--";const t=Math.round(e/6e4);if(isNaN(t))return"--:--";const a=Math.floor(t/60),o=t%60;return`${String(a).padStart(2,"0")}:${String(o).padStart(2,"0")}`},u=(0,o.EW)(()=>{const e=i.value;if(!e)return null;try{const t=e.includes("T")?e:e.replace(" ","T"),a=new Date(t);return isNaN(a.getTime())?null:a.getTime()}catch{return null}}),d=(0,o.EW)(()=>{if(!i.value)return"";try{const e=new Date(i.value);if(isNaN(e.getTime()))return"";const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${o} ${l}:${s}`}catch{return""}}),c=(0,o.EW)(()=>{const e=a.value.filter(e=>"1"===e.isPatient);if(l.value)return e.map(e=>{if(!e.symptomOnset||!e.individualExposureTime)return null;const t=new Date(e.symptomOnset),a=new Date(e.individualExposureTime);return isNaN(t.getTime())||isNaN(a.getTime())||t<a?null:t.getTime()-a.getTime()}).filter(e=>null!==e);{const t=new Date(i.value);return isNaN(t.getTime())?[]:e.map(e=>{if(!e.symptomOnset)return null;const a=new Date(e.symptomOnset);return isNaN(a.getTime())||a<t?null:a.getTime()-t.getTime()}).filter(e=>null!==e)}}),p=(0,o.EW)(()=>0===c.value.length?"--:--":r(Math.min(...c.value))),m=(0,o.EW)(()=>0===c.value.length?"--:--":r(Math.max(...c.value))),v=(0,o.EW)(()=>{if(0===c.value.length)return"--:--";const e=c.value.reduce((e,t)=>e+t,0);return r(e/c.value.length)}),b=(0,o.EW)(()=>{if(0===c.value.length)return"--:--";const e=[...c.value].sort((e,t)=>e-t),t=Math.floor(e.length/2);let a;return a=e.length%2===0?(e[t-1]+e[t])/2:e[t],r(a)}),h=e=>{const t=n.value,a=c.value;if(!t||0===a.length)return[];const o=36e5*t,l=Math.max(...a),i=Math.ceil((l+o)/o),s=Array(i).fill(0);for(const n of a){const e=Math.floor(n/o);e>=0&&e<i&&s[e]++}return s.map((t,a)=>{const l=a*o,i=(a+1)*o;let s;if("hhmm"===e){const e=i-6e4;s=`${r(l)} ~ ${r(e)}`}else s=`${r(l)} ~ ${r(i)}`;return{intervalLabel:s,count:t}})},f=(0,o.EW)(()=>{const e=a.value.some(e=>"1"===e.isPatient&&e.symptomOnset);return!!e&&(l.value?c.value.length>0:null!==u.value)});return{rows:a,isIndividualExposureColumnVisible:l,exposureDateTime:i,selectedIncubationInterval:n,exposureTimestamp:u,formattedExposureDateTime:d,incubationDurations:c,minIncubationPeriodFormatted:p,maxIncubationPeriodFormatted:m,avgIncubationPeriodFormatted:v,medianIncubationPeriodFormatted:b,createIncubationPeriodTableData:h,hasValidExposureData:f,formatDurationHHMM:r}}function Ca(){const e=(0,s.C)(),{t:t}=a(169).A.global,l=[12,15,18,21,24],n=(0,o.EW)(()=>[t("common.size.verySmall"),t("common.size.small"),t("common.size.medium"),t("common.size.large"),t("common.size.veryLarge")]),r=[700,900,1100],u=["#5470c6","#1E88E5","#29ABE2","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],d=(0,o.EW)(()=>e.epidemicCurveSettings),c=(0,i.KR)(d.value.fontSize||18),p=(0,i.KR)(d.value.chartWidth||900),m=(0,i.KR)(d.value.barColor||"#1E88E5"),v=(0,i.KR)(d.value.displayMode||"time"),b=(0,i.KR)(d.value.incubationFontSize||18),h=(0,i.KR)(d.value.incubationChartWidth||800),f=(0,i.KR)(d.value.incubationBarColor||"#91cc75"),x=(0,i.KR)(d.value.incubationDisplayMode||"hour"),g=t=>{c.value=t,e.updateEpidemicCurveSettings({fontSize:t})},y=t=>{p.value=t,e.updateEpidemicCurveSettings({chartWidth:t})},C=t=>{m.value=t,e.updateEpidemicCurveSettings({barColor:t})},w=t=>{v.value=t,e.updateEpidemicCurveSettings({displayMode:t})},k=t=>{b.value=t,e.updateEpidemicCurveSettings({incubationFontSize:t})},S=t=>{h.value=t,e.updateEpidemicCurveSettings({incubationChartWidth:t})},T=t=>{f.value=t,e.updateEpidemicCurveSettings({incubationBarColor:t})},L=t=>{x.value=t,e.updateEpidemicCurveSettings({incubationDisplayMode:t})},E=()=>{g(18),y(1100),C("#1E88E5"),w("time")},R=()=>{k(18),S(800),T("#91cc75"),L("hour")};return{fontSizes:l,fontSizeLabels:n,chartWidths:r,barColors:u,epiChartFontSize:c,epiChartWidth:p,epiBarColor:m,chartDisplayMode:v,incubationChartFontSize:b,incubationChartWidth:h,incubationBarColor:f,incubationChartDisplayMode:x,setEpiFontSize:g,setEpiChartWidth:y,setEpiBarColor:C,setChartDisplayMode:w,resetEpiChartSettings:E,setIncubationFontSize:k,setIncubationChartWidth:S,setIncubationBarColor:T,setIncubationDisplayMode:L,resetIncubationChartSettings:R}}function wa(e){const t=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},a=(e,t,a)=>`#${((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1)}`,o=(e,o)=>{const l=t(e);if(!l)return e;const i=o/100,s=Math.min(255,Math.max(0,Math.round(l.r+(255-l.r)*i))),n=Math.min(255,Math.max(0,Math.round(l.g+(255-l.g)*i))),r=Math.min(255,Math.max(0,Math.round(l.b+(255-l.b)*i)));return a(s,n,r)},l=o(e,40),i=e;return{lightColor:l,darkColor:i}}function ka(e){let t;t=e<10?Math.max(e+1,Math.ceil(1.1*e)):e<20?5*Math.ceil(e/5):10*Math.ceil(1.1*e/10);let a=1;return t>100?a=20:t>50?a=10:t>20?a=5:t>10&&(a=2),t=Math.ceil(t/a)*a,{yMax:t,step:a}}function Sa(e,t){if("datetime"!==e)return"3%";const a=80;let o;o=t<=15?0:t<=18?8*(t-15):t<=21?9*(t-15):15*(t-15);const l=80,i=Math.max(l,a+o);return`${i}px`}function Ta({symptomOnsetTableData:e,confirmedCaseOnsetTableData:t,selectedSymptomInterval:a,chartDisplayMode:o,epiChartFontSize:l,epiBarColor:i,suspectedFood:s,isConfirmedCaseColumnVisible:n,showConfirmedCaseLine:r,t:u}){const d=e;if(!Array.isArray(d)||0===d.length)return{title:{text:"",subtext:"",left:"center"}};const c=d.map(e=>{const t=e.intervalLabel,l=t.split(" ~ "),i=l[0],s=i.split(" ")[0],n=i.split(" ")[1],[r,u]=s.split("-").map(e=>parseInt(e,10)),d=(new Date).getFullYear(),c=new Date(d,r-1,u),p=["일","월","화","수","목","금","토"],m=p[c.getDay()],v=`${r}. ${u}.(${m})`,b=n.split(":")[0];let h;if("datetime"===o)h=e.intervalLabel;else{const e=parseInt(b,10),t=a||3,o=(e+t)%24;h=`${e}~${0===o?24:o}시`}return{formattedDate:v,formattedTime:h,value:Number(e.count)||0}}),p=c.map(e=>e.formattedTime),m=c.map(e=>e.value),v=t.map(e=>Number(e.count)||0),b=[],h=new Map;c.forEach((e,t)=>{h.has(e.formattedDate)||h.set(e.formattedDate,{startIndex:t,count:0});const a=h.get(e.formattedDate);a.count++}),h.forEach((e,t)=>{b.push({name:t,...e})});const f=[...m,...v],x=Math.max(...f),{yMax:g,step:y}=ka(x),C=wa(i||"#1E88E5"),w={textStyle:{fontFamily:"Noto Sans KR, sans-serif"},title:{text:u("epidemicCurve.charts.epidemicCurve"),left:"center",textStyle:{fontSize:(l||15)+4,fontWeight:"bold"},top:15},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{if(!Array.isArray(e)||0===e.length)return"";const t=e[0].dataIndex,a=c[t],l=v[t]||0;let i="datetime"===o?`<strong>${a.formattedTime}</strong><br/>${u("epidemicCurve.symptomTable.count")}: <strong>${a.value}</strong> `:`<strong>${a.formattedDate}</strong><br/>${a.formattedTime} : <strong>${a.value}</strong> `;return n&&r&&l>0&&(i+=`<br/>${u("dataInput.headers.confirmed")}: <strong style="color: #e74c3c;">${l}</strong> `),i}},grid:{left:Sa(o,l),right:"datetime"===o?60:"4%",bottom:s&&s.trim()?"15%":"7%",top:80,containLabel:!0},xAxis:"datetime"===o?[{type:"category",data:p,axisLine:{show:!0,onZero:!1},axisTick:{show:!1},axisLabel:{interval:0,color:"#333",fontSize:l||15,margin:10,rotate:45},splitLine:{show:!1},boundaryGap:!0}]:[{type:"category",data:p,axisLine:{show:!0,onZero:!1},axisTick:{show:!1},axisLabel:{interval:0,color:"#333",fontSize:l||15,margin:10,rotate:0},splitLine:{show:!1},boundaryGap:!0},{type:"category",position:"bottom",offset:35,axisLine:{show:!0,lineStyle:{color:"#cccccc",width:2}},axisTick:{show:!0,inside:!1,length:70,lineStyle:{color:"#cccccc",width:2}},axisLabel:{show:!0,color:"#333",fontSize:l||15},splitLine:{show:!1},data:b.flatMap(e=>{const t=Array(e.count).fill("");return t.length>0&&(t[0]=e.name),t})}],yAxis:{type:"value",name:u("epidemicCurve.symptomTable.count")+" ("+(u("epidemicCurve.controls.countUnit")||"N")+")",nameTextStyle:{padding:[0,0,0,60],fontSize:l||15},axisLabel:{fontSize:l||15},splitLine:{show:!0,lineStyle:{type:"dashed"}},max:g,interval:y},legend:{show:n&&r&&v.length>0,data:[u("epidemicCurve.symptomTable.count"),u("dataInput.headers.confirmed")],top:50,right:20,textStyle:{fontSize:l||15}},series:[{name:u("epidemicCurve.symptomTable.count"),type:"bar",xAxisIndex:0,data:m,barWidth:"100%",itemStyle:{color:new A.fA.W4(0,0,0,1,[{offset:0,color:C.lightColor},{offset:1,color:C.darkColor}])},emphasis:{focus:"series",itemStyle:{color:new A.fA.W4(0,0,0,1,[{offset:0,color:"#FDB813"},{offset:1,color:"#F9A825"}])}},label:{show:!0,position:"top",fontSize:Math.max(10,(l||15)-1)}},...n&&r&&v.length>0?[{name:u("dataInput.headers.confirmed"),type:"line",xAxisIndex:0,data:v,symbol:"circle",symbolSize:6,lineStyle:{color:"#e74c3c",width:3},itemStyle:{color:"#e74c3c",borderColor:"#fff",borderWidth:2},emphasis:{focus:"series",itemStyle:{color:"#c0392b",borderColor:"#fff",borderWidth:2}},label:{show:!0,position:"top",fontSize:Math.max(10,(l||15)-1),color:"#e74c3c",formatter:e=>{const t=m[e.dataIndex]||0,a=e.value||0;return t!==a?String(a):""}}}]:[]]};return s&&s.trim()&&(w.graphic=[{type:"text",left:"5%",bottom:"5%",style:{text:`${u("epidemicCurve.suspectedFood.title")} : ${s}`,fontSize:l||15,fill:"#333",fontWeight:"normal"}}]),w}function La({incubationPeriodTableData:e,incubationChartDisplayMode:t,incubationChartFontSize:a,incubationBarColor:o,suspectedFood:l,t:i}){const s=e;if(!Array.isArray(s)||0===s.length)return{title:{text:"",subtext:"",left:"center"}};const n=s.every(e=>e&&"string"===typeof e.intervalLabel);if(!n)return{title:{text:"데이터 라벨 오류"}};const r=s.map(e=>Number(e.count)||0),u=Math.max(...r),{yMax:d,step:c}=ka(u),p=s.map(e=>e.intervalLabel),m=wa(o||"#91cc75"),v={textStyle:{fontFamily:"Noto Sans KR, sans-serif"},title:{text:i("epidemicCurve.charts.incubationPeriod"),left:"center",textStyle:{fontSize:(a||15)+4,fontWeight:"bold"},top:15},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{if(!Array.isArray(e)||0===e.length)return"";const t=e[0];return`<strong>${t.name}</strong><br/>${t.seriesName}: <strong>${t.value}</strong> ${i("epidemicCurve.controls.countUnit")||"patients"}`}},grid:{left:"hhmm"===t?60:"3%",right:"hhmm"===t?60:"4%",bottom:l&&l.trim()?"15%":"5%",top:80,containLabel:!0},xAxis:[{type:"category",data:p,axisLine:{show:!0,onZero:!1},axisTick:{show:!1},axisLabel:{rotate:"hhmm"===t?45:0,interval:0,fontSize:a||15,color:"#333",margin:10},splitLine:{show:!1},boundaryGap:!0}],yAxis:{type:"value",name:i("epidemicCurve.symptomTable.count"),nameTextStyle:{padding:[0,0,0,60],fontSize:a||15},axisLabel:{fontSize:a||15},splitLine:{show:!0,lineStyle:{type:"dashed"}},max:d,interval:c},series:[{name:i("epidemicCurve.symptomTable.count"),type:"bar",data:r,barWidth:"100%",itemStyle:{color:new A.fA.W4(0,0,0,1,[{offset:0,color:m.lightColor},{offset:1,color:m.darkColor}])},emphasis:{focus:"series",itemStyle:{color:new A.fA.W4(0,0,0,1,[{offset:0,color:"#FDB813"},{offset:1,color:"#F9A825"}])}},label:{show:!0,position:"top",fontSize:Math.max(10,(a||15)-1)}}]};return l&&l.trim()&&(v.graphic=[{type:"text",left:"5%",bottom:"8%",style:{text:`${i("epidemicCurve.suspectedFood.title")}: ${l}`,fontSize:a||15,fill:"#333",fontWeight:"normal"}}]),v}var Ea=a(6051);const Ra={class:"bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen"},$a={class:"flex items-center justify-between px-4 py-2 bg-white/80 backdrop-blur-md border-b border-white/20 shadow-glass z-[4] sticky top-0"},Ia={class:"flex flex-col p-6 max-w-[1600px] mx-auto w-full"},Wa={class:"mb-6"},Ma={class:"flex flex-col gap-8"},Fa={class:"flex gap-5 items-stretch flex-wrap xl:flex-nowrap"},Da={class:"flex-1 min-w-[500px] bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden flex flex-col xl:max-w-[450px]"},_a={class:"p-4 border-b border-slate-100 bg-slate-50/50"},za={class:"text-lg font-bold text-slate-800 flex items-center gap-2"},Oa={class:"p-4"},Aa={class:"px-5"},Va={class:"mt-4"},Xa={class:"flex-[2] min-w-[600px] bg-white rounded-2xl shadow-premium border border-slate-100 p-5 flex flex-col gap-5"},Ba={class:"flex gap-5 items-stretch flex-wrap xl:flex-nowrap"},Na={class:"flex-1 min-w-[500px] bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden flex flex-col xl:max-w-[450px]"},Ka={class:"p-4 border-b border-slate-100 bg-slate-50/50"},Ua={class:"text-lg font-bold text-slate-800 flex items-center gap-2"},Pa={class:"p-4"},Ha={class:"px-5"},ja={class:"flex-[2] min-w-[600px] bg-white rounded-2xl shadow-premium border border-slate-100 p-5 flex flex-col gap-5"};var Qa=(0,o.pM)({__name:"index",setup(e){const t=(0,s.C)(),{t:a}=(0,n.s9)(),{isIndividualExposureColumnVisible:r,isConfirmedCaseColumnVisible:u,exposureDateTime:d,selectedSymptomInterval:c,symptomOnsetTableData:m,confirmedCaseOnsetTableData:b,formattedFirstOnsetTime:h,formattedLastOnsetTime:f}=ga(),{selectedIncubationInterval:x,formattedExposureDateTime:g,incubationDurations:y,minIncubationPeriodFormatted:C,maxIncubationPeriodFormatted:w,avgIncubationPeriodFormatted:k,medianIncubationPeriodFormatted:S,createIncubationPeriodTableData:T}=ya(),{fontSizes:L,fontSizeLabels:E,chartWidths:R,barColors:$,epiChartFontSize:I,epiChartWidth:W,epiBarColor:M,chartDisplayMode:F,incubationChartFontSize:D,incubationChartWidth:_,incubationBarColor:O,incubationChartDisplayMode:A,setEpiFontSize:V,setEpiChartWidth:B,setEpiBarColor:N,setChartDisplayMode:K,resetEpiChartSettings:U,setIncubationFontSize:P,setIncubationChartWidth:H,setIncubationBarColor:j,setIncubationDisplayMode:Q,resetIncubationChartSettings:Y}=Ca(),{suspectedFood:q}=v(),{copyEpiChartToClipboard:G,copyIncubationChartToClipboard:Z,exportEpiChart:J,exportIncubationChart:ee}=X(),te=(0,i.KR)(null),ae=(0,i.KR)(null),oe=(0,i.KR)(null),le=(0,i.KR)(null),ie=(0,i.KR)(!1),se=(0,i.KR)(!1),ne=(0,i.KR)(!1),re=(0,i.KR)(!1),ue=(0,i.KR)(!0),ce=(0,i.KR)(null),pe=(0,i.KR)({visible:!1,position:{top:0,left:0},initialValue:null}),me=(0,o.EW)(()=>T(A.value)),ve=(0,o.EW)(()=>!(!d.value||0!==y.value.length||r.value)),be=(0,o.EW)(()=>Ta({symptomOnsetTableData:m.value,confirmedCaseOnsetTableData:b.value,selectedSymptomInterval:c.value,chartDisplayMode:F.value,epiChartFontSize:I.value,epiBarColor:M.value,suspectedFood:q.value,isConfirmedCaseColumnVisible:u.value,showConfirmedCaseLine:ue.value,t:a})),he=(0,o.EW)(()=>La({incubationPeriodTableData:me.value,incubationChartDisplayMode:A.value,incubationChartFontSize:D.value,incubationBarColor:O.value,suspectedFood:q.value,t:a})),fe=e=>{t.updateSymptomInterval(e)},xe=e=>{t.updateIncubationInterval(e)},ge=()=>{ue.value=!ue.value},ye=e=>{oe.value=e,window.epidemicCurveChartInstance=e,window.currentEpidemicChartInstance=e},Ce=e=>{le.value=e},we=()=>{if(!oe.value)return void console.warn("EpiCurve chart instance not found");const e=oe.value.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"});t.updateEpidemicCurveSettings({reportChartDataUrl:e,reportChartWidth:W.value}),ie.value=!0,ne.value=!0,setTimeout(()=>ne.value=!1,1500)},ke=()=>{if(!le.value)return void console.warn("Incubation chart instance not found");const e=le.value.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"});t.updateEpidemicCurveSettings({reportIncubationChartDataUrl:e,reportIncubationChartWidth:_.value}),se.value=!0,re.value=!0,setTimeout(()=>re.value=!1,1500)},Se=e=>{G(e,W.value)},Te=e=>{Z(e,_.value)},Le=e=>{J(e,W.value,c.value)},Ee=e=>{ee(e,_.value,x.value)},Re=e=>{if(!e)return"";const{year:t,month:a,day:o,hour:l,minute:i}=e;return`${t}-${String(a).padStart(2,"0")}-${String(o).padStart(2,"0")}T${l}:${i}`},$e=e=>{if(!e||!e.target)return;const t=e.target.getBoundingClientRect();let a=(0,Ea.parseDateTime)(d.value);if(!a){const e=new Date;a={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0")}}pe.value={visible:!0,position:{top:t.bottom+window.scrollY+5,left:t.left+window.scrollX},initialValue:a}},Ie=e=>{try{const a=Re(e);t.updateExposureDateTime(a),console.log("노출시간 설정 완료:",a)}catch(a){console.error("노출시간 설정 오류:",a)}pe.value.visible=!1},We=()=>{pe.value.visible=!1};return(0,o.sV)(()=>{console.log("EpidemicCurve 컴포넌트 마운트됨")}),(0,o.n)(()=>{console.log("EpidemicCurve 탭 활성화됨"),(0,o.dY)(()=>{te.value&&te.value.updateChart?.(),ae.value&&ae.value.updateChart?.()})}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",Ra,[(0,o.Lk)("header",$a,[(0,o.bF)(ma.A)]),(0,o.Lk)("div",Ia,[(0,o.Lk)("div",Wa,[(0,o.bF)(p,{title:e.$t("epidemicCurve.title")},null,8,["title"])]),(0,o.Lk)("div",Ma,[(0,o.Lk)("div",Fa,[(0,o.Lk)("div",Da,[(0,o.Lk)("div",_a,[(0,o.Lk)("h3",za,[t[1]||(t[1]=(0,o.Lk)("span",{class:"w-1.5 h-6 bg-blue-500 rounded-full"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e.$t("epidemicCurve.symptomAnalysis")),1)])]),(0,o.Lk)("div",Oa,[(0,o.Lk)("div",Aa,[(0,o.bF)(z)]),(0,o.Lk)("div",Va,[(0,o.bF)(de,{tableData:(0,i.R1)(m),firstOnsetTime:(0,i.R1)(h),lastOnsetTime:(0,i.R1)(f)},null,8,["tableData","firstOnsetTime","lastOnsetTime"])])])]),(0,o.Lk)("div",Xa,[(0,o.bF)(et,{selectedInterval:(0,i.R1)(c),chartFontSize:(0,i.R1)(I),chartWidth:(0,i.R1)(W),barColor:(0,i.R1)(M),displayMode:(0,i.R1)(F),fontSizes:(0,i.R1)(L),fontSizeLabels:(0,i.R1)(E),chartWidths:(0,i.R1)(R),barColors:(0,i.R1)($),showConfirmedCaseToggle:(0,i.R1)(u),showConfirmedCaseLine:ue.value,"onUpdate:selectedInterval":fe,"onUpdate:chartFontSize":(0,i.R1)(V),"onUpdate:chartWidth":(0,i.R1)(B),"onUpdate:barColor":(0,i.R1)(N),"onUpdate:displayMode":(0,i.R1)(K),onToggleConfirmedCaseLine:ge,onResetSettings:(0,i.R1)(U)},null,8,["selectedInterval","chartFontSize","chartWidth","barColor","displayMode","fontSizes","fontSizeLabels","chartWidths","barColors","showConfirmedCaseToggle","showConfirmedCaseLine","onUpdate:chartFontSize","onUpdate:chartWidth","onUpdate:barColor","onUpdate:displayMode","onResetSettings"]),(0,o.bF)(ht,{ref_key:"epiCurveChartRef",ref:te,chartOptions:be.value,chartWidth:(0,i.R1)(W),isChartSaved:ie.value,showChartSavedTooltip:ne.value,onSaveChartForReport:we,onCopyChart:Se,onExportChart:Le,onChartInstance:ye},null,8,["chartOptions","chartWidth","isChartSaved","showChartSavedTooltip"])])]),(0,o.Lk)("div",Ba,[(0,o.Lk)("div",Na,[(0,o.Lk)("div",Ka,[(0,o.Lk)("h3",Ua,[t[2]||(t[2]=(0,o.Lk)("span",{class:"w-1.5 h-6 bg-emerald-500 rounded-full"},null,-1)),(0,o.eW)(" "+(0,l.v_)(e.$t("epidemicCurve.incubationAnalysis")),1)])]),(0,o.Lk)("div",Pa,[(0,o.Lk)("div",Ha,[(0,o.bF)(Et,{formattedExposureDateTime:(0,i.R1)(g),isIndividualExposureColumnVisible:(0,i.R1)(r),onShowExposureDateTimePicker:$e},null,8,["formattedExposureDateTime","isIndividualExposureColumnVisible"])]),(0,o.bF)(oa,{tableData:me.value,minIncubation:(0,i.R1)(C),maxIncubation:(0,i.R1)(w),avgIncubation:(0,i.R1)(k),medianIncubation:(0,i.R1)(S),hasExposureDateTime:!!(0,i.R1)(d),isIndividualExposureColumnVisible:(0,i.R1)(r)},null,8,["tableData","minIncubation","maxIncubation","avgIncubation","medianIncubation","hasExposureDateTime","isIndividualExposureColumnVisible"])])]),(0,o.Lk)("div",ja,[(0,o.bF)(sa,{selectedInterval:(0,i.R1)(x),chartFontSize:(0,i.R1)(D),chartWidth:(0,i.R1)(_),barColor:(0,i.R1)(O),displayMode:(0,i.R1)(A),fontSizes:(0,i.R1)(L),fontSizeLabels:(0,i.R1)(E),chartWidths:(0,i.R1)(R),barColors:(0,i.R1)($),formattedExposureDateTime:(0,i.R1)(g),isIndividualExposureColumnVisible:(0,i.R1)(r),"onUpdate:selectedInterval":xe,"onUpdate:chartFontSize":(0,i.R1)(P),"onUpdate:chartWidth":(0,i.R1)(H),"onUpdate:barColor":(0,i.R1)(j),"onUpdate:displayMode":(0,i.R1)(Q),onResetSettings:(0,i.R1)(Y),onShowExposureDateTimePicker:t[0]||(t[0]=e=>$e(e))},null,8,["selectedInterval","chartFontSize","chartWidth","barColor","displayMode","fontSizes","fontSizeLabels","chartWidths","barColors","formattedExposureDateTime","isIndividualExposureColumnVisible","onUpdate:chartFontSize","onUpdate:chartWidth","onUpdate:barColor","onUpdate:displayMode","onResetSettings"]),(0,o.bF)(pa,{ref_key:"incubationChartRef",ref:ae,chartOptions:he.value,chartWidth:(0,i.R1)(_),isChartSaved:se.value,showChartSavedTooltip:re.value,showWarningMessage:ve.value,formattedExposureDateTime:(0,i.R1)(g),onSaveChartForReport:ke,onCopyChart:Te,onExportChart:Ee,onChartInstance:Ce},null,8,["chartOptions","chartWidth","isChartSaved","showChartSavedTooltip","showWarningMessage","formattedExposureDateTime"])])])])]),(0,o.bF)(va.A,{ref_key:"exposureDateTimePickerRef",ref:ce,visible:pe.value.visible,position:pe.value.position,initialValue:pe.value.initialValue,onConfirm:Ie,onCancel:We},null,8,["visible","position","initialValue"])]))}});const Ya=Qa;var qa=Ya}}]);